---
title: Создание моделей
layout: usermanual-page.hbs
position: 2
---

Создание графики и анимаций для PlayCanvas можно выполнить с помощью почти любой из множества доступных 3D-моделирующих программ. Например: Blender, SketchUp, Autodesk 3D Studio Max или Autodesk Maya.

PlayCanvas разработан для импорта контента наиболее точно через открытый двоичный формат glTF (GLB), поэтому, в целом, если ваше приложение для моделирования поддерживает GLB, PlayCanvas также поддерживает его.

Импорт GLB поддерживает следующие функции glTF для невероятно быстрого создания сцены:

- Иерархия узлов
- Стандартный материал
- Ратифицированные расширения материалов
- Анимированные скелеты и данные скиннинга
- Целевые морфы
- Камеры
- Модели с сжатием Draco
- Поддержка точечного света

Таким образом, для работы с PlayCanvas вам не нужно использовать специальные плагины для инструментов искусства, и вам не нужно следовать специфическим для PlayCanvas рабочим процессам.

![Пример импорта GLB][14]

(Модель от Loïc Norgeot и сканирование комара от Geoffrey Marchal для [Sketchfab][13] лицензировано по [CC BY 4.0][12]).

PlayCanvas также поддерживает импорт файлов FBX, который является еще одним распространенным форматом обмена. Однако материалы FBX не импортируются так точно, как материалы glTF, и могут потребовать некоторой правки после импорта.

Мы рекомендуем использовать GLB, когда это возможно, для наилучшего опыта и наивысшей совместимости.

Некоторые программы для моделирования и анимации, которые стоит рассмотреть:

* Бесплатные варианты: Blender\*, Wings3D, Voidworld, SketchUp, Sculptris, Daz Studio\*.
* Платные варианты с низкой стоимостью: 3D-Coat, NVIL, Hexagon.
* Платные варианты с высокой стоимостью: ZBrush, Autodesk 3D Studio Max\*, Autodesk Maya\*, Luxology Modo\*.

\* *эта программа также может создавать анимации.*

Для создания текстур рассмотрите следующие программы:

* Бесплатные: Blender, Pixexix Free, xNormal, MaPZone, GIMP, Krita desktop, MyPaint.
* Платные: Substance Designer (а также Substance Painter и Bitmap2Material), Photoshop, Quixel NDO и DDO, CrazyBump, Pixexix Pro, Clip Studio Paint/Manga Studio, SERIF DrawPlus/PhotoPlus.

Обратите внимание, что многие из перечисленных выше программ для моделирования также позволяют рисовать текстуры. Если вы хотите больше вариантов, эта [внешняя вики-страница][1] может помочь. Обратите внимание, что некоторая информация может быть устаревшей.

## Общие соображения по конструкции сетки

Независимо от того, какое приложение для моделирования вы используете, при создании 3D-сцен для PlayCanvas следует учитывать ряд вещей.

* Сетки могут быть привязаны к 256 костям.
* NURBS-сетки будут преобразованы в треугольные сетки при преобразовании в собственный формат PlayCanvas.

---

## Blender

![Логотип Blender][3]

[Blender][4] - это фантастический бесплатный инструмент для 3D-моделирования, и он идеально подходит для создания 3D-ресурсов для PlayCanvas.

Blender поддерживает экспорт в GLB, FBX и COLLADA, но встроенные экспортеры имеют некоторые ограничения.

### **Типы карт**

Начиная с Blender 2.71, как диффузные, так и нормальные карты вашего материала будут экспортироваться в файл FBX. Если другие типы карт теряются при экспорте, вам нужно настроить эти карты в редакторе материалов в редакторе.

### **Встраивание текстур**

Встроенные текстуры упрощают импорт.

Экспортер COLLADA Blender не имеет возможности встраивать текстуры в экспортированный файл модели.

Версия 2.71 Blender содержит обновленный модуль экспорта FBX, который позволяет встраивать несколько текстур непосредственно из Blender. Сначала убедитесь, что объект отображается правильно в Blender. При экспорте в FBX установите 'Path Mode' на Copy и установите флажок 'Embed Textures'.

В качестве альтернативы используйте [Autodesk FBX Converter][5] для преобразования экспорта из Blender в один с встроенными медиафайлами. Просто откройте файл в конвертере FBX и сохраните его с установленным флажком *Embedded Media*.

<div class="alert alert-warning">
Примечание: похоже, что существует проблема с экспортом FBX Blender 2.71, генерирующим излучение, несмотря на то, что в Blender не установлены излучательные свойства - это не проблема движка PlayCanvas. Чтобы избежать этого из Blender, вы можете изменить настройку цвета диффузии материала на 0 (на вкладке «Материал» в «Редакторе свойств»). Или просто уменьшите излучение в редакторе PlayCanvas.
</div>

### **Анимации**

Начиная с Blender 2.71:

Анимации, включенные в файл blend, экспортируются с настройками экспортера fbx по умолчанию и совместимы с конвейером импорта ассетов PlayCanvas. Обратите внимание, что для нескольких анимаций одной модели вам потребуется загрузить несколько файлов fbx - по одному для каждой анимации. Чтобы сэкономить память, вы можете удалить модели и текстуры из файла blend перед экспортом, выбрать экспорт только арматур в настройках экспортера fbx или просто удалить дублирующиеся ассеты "модели" из целевых ассетов на странице ассетов вашего проекта (выберите "цель" в выпадающем меню на странице ассетов, чтобы просмотреть целевые ассеты).

### **Изучение Blender**

В Интернете есть множество ресурсов для изучения работы с Blender. Несколько из них, которые мы рекомендуем:

* [Blender Cookie][2]
* [Blender Guru][6]

---

## Autodesk 3D Studio Max

### Материалы Max

Вы должны использовать тип материала Standard в Max или тип материала Multi/Sub-Object, при условии что материалы, на которые он ссылается, являются стандартными материалами. Выделенные области на следующем скриншоте показывают настройки, которые учитываются при экспорте в PlayCanvas:

![Редактор материалов Max][7]

### Поддерживаемые слоты карт

PlayCanvas интерпретирует подмножество типов карт материалов 3DS Max при экспорте. Обратите внимание, что карты могут быть в любом формате, поддерживаемом 3DS Max, но если карты не в веб-формате (а именно JPEG, GIF или PNG), то они будут преобразованы в эти форматы при экспорте.

**Diffuse Color**

Назначение карты Bitmap на этот слот позволяет использовать отображение диффузии в материале PlayCanvas. Это, по сути, переопределяет установленный цвет диффузии на материале (через выбор цвета). Если у карты диффузии есть альфа-канал, он будет использоваться как значение альфа на пикселе во время выполнения PlayCanvas.

Кроме того, можно назначить карту RGB Multiply на слот Diffuse Color. Это позволяет включить сопоставление освещения, где карта 1 является картой диффузии, а карта 2 - картой освещения.

**Specular Color**

Назначение карты Bitmap на этот слот позволяет использовать отображение зеркального отражения в материале PlayCanvas. Это, по сути, переопределяет установленный цвет зеркального отражения на материале (через выбор цвета). Это позволяет закрыть области зеркального отражения на поверхности или окрасить зеркальные блики разными цветами в разных областях. Если у карты зеркального отражения есть альфа-канал, он будет использоваться для установки пиксельного блеска.

**Specular Level**

Назначение карты Bitmap на этот слот активирует пиксельное ослабление цвета зеркального отражения материала. Это, по сути, переопределяет установленный уровень зеркального отражения на материале.

**Glossiness**

Назначение карты Bitmap на этот слот активирует пиксельную глянцевость на материале. Это, по сути, переопределяет установленную глянцевость на материале.

**Self-Illumination**

Назначение карты Bitmap на этот слот позволяет использовать карту излучения в материале PlayCanvas. Карта излучения может быть полностью RGB (вам не ограничены только оттенками серого) и, по сути, будет добавлена к результату освещения поверхности. Таким образом, черный пиксель на карте излучения ничего не добавит к значению пикселя. Все остальное увеличит яркость пикселя.

**Opacity**

Назначение карты Bitmap на этот слот позволяет использовать отображение прозрачности на материале PlayCanvas. Черный пиксель на карте прозрачности будет полностью прозрачным, белый пиксель будет полностью непрозрачным, а серый пиксель будет соответствовать некоторому промежуточному значению альфа.

Если у материала есть карта прозрачности, она переопределит любой альфа-канал, который мог быть установлен в карте диффузии. Использование слота карты прозрачности менее эффективно, чем альфа-канал карты диффузии, так как во время выполнения PlayCanvas генерируются две текстуры вместо одной, и стандартный шейдер должен выполнить немного больше работы. Однако, если производительность не является проблемой и удобно использовать карту прозрачности, функциональность поддерживается.

**Bump**

Назначение карты Normal Bump на этот слот позволяет использовать нормальное отображение. Обратите внимание, что по умолчанию значение "Amount" для слота Bump установлено на 30. PlayCanvas фактически игнорирует это значение и обрабатывает его так, как если бы оно было установлено на 100, поэтому рекомендуется установить его на 100 в Max, чтобы рендер соответствовал реальному времени выполнения.

Существуют разные способы создания нормальных карт, два основных из которых отличаются форматом зеленого компонента. Например, по умолчанию 3DS Max ожидает, что нормальная карта для кирпичной стены будет выглядеть следующим образом:

![Нормальная карта][8]

Обратите внимание на более светлые области у нижнего края выступающих участков. PlayCanvas ожидает, что зеленый компонент (или компонент Y каждой нормали на нормальной карте) будет перевернут. Загрузив файл в Photoshop, выбрав зеленый канал и нажав Ctrl+I для инвертирования канала, получим:

![Нормальная карта с перевернутым компонентом Y][9]

Теперь освещение в PlayCanvas будет согласованным.

Если назначенная нормальная карта имеет альфа-канал, он будет рассматриваться как карта параллакса, а альфа-канал будет интерпретироваться как карта высот. Более светлые области карты высот рассматриваются как "выше" темных областей.

**Отражение**

Назначение Bitmap-карты на этот слот позволяет использовать сферическое отображение в материале PlayCanvas. Битмап будет выглядеть примерно так:

![Сферическая карта][10]

Сферическое отображение - один из самых дешевых и наименее "убедительных" видов отображения отражений, но во многих сценариях это достаточно, чтобы обеспечить приятный глянцевый блеск поверхностям.

---

## Autodesk Maya

### Материалы Maya

Вы должны использовать стандартные типы материалов в Maya: ламберт, блит и фонг. Выделенные области на скриншоте ниже показывают настройки материала, которые учитываются при экспорте в PlayCanvas:

![Редактор материалов Maya][11]

[1]: http://wiki.polycount.com/wiki/Tools
[2]: https://cgcookie.com/learn-blender
[3]: /images/user-manual/assets/models/building/blender-logo.jpg
[4]: https://www.blender.org/
[5]: https://www.autodesk.com/developer-network/platform-technologies/fbx-converter-archives
[6]: https://www.blenderguru.com/
[7]: /images/user-manual/assets/models/building/max-material-editor.jpg
[8]: /images/user-manual/assets/models/building/wall-norm.jpg
[9]: /images/user-manual/assets/models/building/wall-norm-yflip.jpg
[10]: /images/user-manual/assets/models/building/mountains-sphere.jpg
[11]: /images/user-manual/assets/models/building/maya-material-editor.jpg
[12]: https://creativecommons.org/licenses/by/4.0/
[13]: https://sketchfab.com/3d-models/real-time-refraction-demo-mosquito-in-amber-37233d6ed84844fea1ebe88069ea58d1
[14]: /images/user-manual/assets/models/building/glb-import.gif