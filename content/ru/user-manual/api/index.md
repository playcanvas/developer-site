---
title: REST API
layout: usermanual-page.hbs
position: 22
---

<div class="alert alert-info">
    REST API в настоящее время находится в стадии бета-тестирования. Это означает, что мы можем изменить определенные конечные точки и ответы API.
</div>

## Авторизация

Вы можете получить доступ к REST API только через https. Для доступа к REST API вам нужно использовать токен доступа. Вы можете сгенерировать токен доступа, перейдя на страницу учетной записи вашей организации.

![Вкладка учетной записи][4]

В разделе API Tokens нажмите на кнопку Generate Token.

![Создать токен][1]

Дайте вашему токену имя и нажмите кнопку для создания вашего нового токена. В новом окне появится ваш новый токен доступа.

Обязательно запишите его, потому что вы не сможете увидеть токен после закрытия этого окна. Этот токен предназначен для сохранения в тайне, поэтому не делитесь им с кем-либо, кроме вашей команды (например, не публикуйте его на форумах).

![Новый токен][2]

На странице вашей учетной записи вы также можете отозвать все сгенерированные вами токены или конкретный токен. Вы также можете изменить имя токена.

![Удалить токен][3]

При отправке запросов к API вы должны установить заголовок 'Authorization' в вашем HTTP-запросе на это значение:

```none
Bearer [access_token]
```

Замените `[access_token]` на токен доступа, который вы сгенерировали на странице вашего аккаунта.

Например:

```none
curl -H "Authorization: Bearer nesgdxhiqe7hylfilr6ss1rds0gq1uj8" https://playcanvas.com/api/...
```

## Параметры

Различные маршруты принимают ряд параметров. Для запросов GET, если параметр не является частью URL, вы можете передать его в виде параметра строки запроса HTTP. Для запросов POST, PUT и DELETE параметры, не включенные в URL, должны быть закодированы в формате JSON с Content-Type 'application/json'.

Есть несколько общих параметров, которые используются в каждой конечной точке:

### project_id

Этот параметр можно найти в URL на странице обзора проекта.

![Project ID][6]

### scenes

При открытии сцены в редакторе идентификатор сцены находится в URL.

![Scene ID][7]

### branch_id

Этот параметр можно найти в панели [version control][5] и его можно выбрать и скопировать.

![Branch ID][8]

## Формат ответа

Наш REST API следует некоторым общим рекомендациям по формату ответа каждого вызова API.

#### GET resource

Если вы пытаетесь получить один ресурс с помощью GET, ответ будет объектом JSON с запрашиваемым ресурсом.

#### GET multiple resources

Если вы пытаетесь получить несколько ресурсов, например, перечисляя приложения проекта, вы получите объект JSON следующего формата:

```none
{
    "result": [
        resource_1,
        resource_2,
        ...,
        resource_N
    ],
    "pagination": {
        "limit": число,
        "skip": число,
        "total": число
    }
}
```

Как вы можете заметить, ответ в этом случае также содержит данные о разбиении на страницы. Чтобы контролировать разбиение на страницы ответа, вы можете передать следующие параметры URL:

<div class="params">
<div class="parameter"><span class="param">limit</span><p>Максимальное количество элементов, которые следует включить в ответ.</p></div>
<div class="parameter"><span class="param">skip</span><p>Количество элементов, которые следует пропустить из исходного набора результатов.</p></div>
<div class="parameter"><span class="param">sort</span><p>Название поля, которое следует использовать для сортировки набора результатов. См. документацию по каждому запросу, чтобы узнать, какие значения здесь допустимы.</p></div>
<div class="parameter"><span class="param">order</span><p>Если вы хотите получить результаты в порядке возрастания, передайте 1, в противном случае передайте -1 для порядка убывания.</p></div>
</div>

Так что, например, чтобы получить 32 элемента после первых 16 элементов, вы должны отправить этот запрос:

```none
https://playcanvas.com/api/items?limit=32&amp;skip=16
```

#### Ошибки

Когда возникает ошибка, вы получите объект JSON в таком формате:

```json
{
    "error": "Это сообщение об ошибке"
}
```

Также код состояния ответа будет соответствующим кодом ошибки HTTP.

## Ограничение скорости

Запросы к REST API имеют ограничение скорости. 

Проверьте свои лимиты [здесь](https://playcanvas.com/api/ratelimits).
Существуют разные ограничения скорости в зависимости от запроса:

| Тип лимита | Описание               | Лимит для бесплатных акканутов          | Лимит для персональных аккантов и организаций    |
|-----------------|---------------------------|-------------------------------|--------------------------------|
| Normal          | Нормальный лимит     | 120 запросов в минуту    | 240 запросов в минуту     |
| Strict          | "Строгий" лимит     | 5 запросов в минуту      | 10 запросов в минуту      |
| Assets          | Лимит для загрузки ассетов     | 60 запросов в минуту    | 120 запросов в минуту     |

Ответ будет содержать следующие заголовки, чтобы помочь вам регулировать частоту вызова API:

<div class="params">
<div class="parameter"><span class="param">X-RateLimit-Limit</span><p>Количество разрешенных запросов в минуту.</p></div>
<div class="parameter"><span class="param">X-RateLimit-Remaining</span><p>Оставшееся количество запросов, которые вы можете сделать в эту минуту.</p></div>
<div class="parameter"><span class="param">X-RateLimit-Reset</span><p>Время, в которое текущее окно ограничения скорости сбрасывается в <a href="https://en.wikipedia.org/wiki/Unix_time" target="_blank">UTC эпохе секунд</a>.</p></div>
</div>

Если вы превысите ограничение скорости, вы получите код состояния `429 Too Many Requests`. Вам придется подождать сброса текущего окна, чтобы продолжить отправку запросов.

[1]: /images/user-manual/api/generate-token.png
[2]: /images/user-manual/api/new-token.png
[3]: /images/user-manual/api/remove-token.png
[4]: /images/user-manual/api/account-tab.png
[5]: /user-manual/version-control/
[6]: /images/user-manual/api/project-id.png
[7]: /images/user-manual/api/scene-id.png
[8]: /images/user-manual/api/branch-id.png
