---
title: Локализация
layout: usermanual-page.hbs
position: 9
---

На этой странице описывается, как локализовать ваши текстовые элементы на разные языки.

## Файлы локализации

Для каждого языка, который вы хотите поддерживать, вам нужно добавить JSON-ресурс, содержащий переведенные фразы для этого языка. PlayCanvas поддерживает определенный формат для JSON-ресурса. Откройте настройки редактора, и в разделе ЛОКАЛИЗАЦИЯ нажмите Создать новый ресурс, чтобы создать новый JSON-ресурс в ожидаемом формате.

JSON-ресурс выглядит следующим образом:

```javascript
{
    "header": {
        "version": 1
    },
    "data": [
        {
            "info": {
                "locale": "ru-RU"
            },
            "messages": {
                "key": "Перевод одного ключа",
                "key plural": [
                    "Перевод одного ключа",
                    "Перевод для {number} ключей"
                ]
            }
        }
    ]
}
```

Вы можете указать другой язык в разделе `info` JSON-файла. Раздел `messages` содержит пары ключ-значение для каждой локализованной фразы. Ключ является идентификатором этой фразы, а текст - переведенным текстом для этого ключа.

PlayCanvas также поддерживает множественные формы для каждого языка. Чтобы указать множественные формы для каждой фразы, вам нужно передать массив строк для каждой множественной формы вместо одной строки. У каждого языка есть разные множественные формы, которые вы можете найти [здесь][1]. Каждый элемент массива соответствует множественной форме для этого языка. Например, для английского:

```javascript
"ключ множественного числа": [
    "Один элемент", // форма множественного числа ONE
    "Не один" // форма множественного числа OTHER
]
```

Для русского:

# Создание материала с использованием Shader Editor

В этом руководстве вы узнаете, как создать материал с использованием Shader Editor.

## Начало работы

1. Откройте проект в Unity.
2. В окне "Project" перейдите в папку "Assets".
3. Создайте новый материал: щелкните правой кнопкой мыши в папке "Assets" и выберите "Create > Material Asset".

![Tutorial Thumbnail](images/tutorial_thumbnail.png)

## Открытие Shader Editor

1. Выберите созданный материал в окне "Assets".
2. В окне "Material Inspector" выберите "Open Shader Editor".

![Shader Editor](images/shader_editor.png)

## Редактирование материала

1. В окне "Graph Editor" добавьте новый узел: щелкните правой кнопкой мыши и выберите "Create Node > Entity".
2. Выберите созданный узел и в окне "Node Inspector" измените его параметры.
3. Соедините узлы в окне "Graph Editor" для создания материала.

![Graph Editor](images/graph_editor.png)

## Назначение текстуры

1. В окне "Texture Inspector" выберите текстуру для материала.
2. Перетащите текстуру на соответствующий узел в окне "Graph Editor".

![Texture Inspector](images/texture_inspector.png)

## Просмотр изменений

1. В окне "Graph Inspector" нажмите кнопку "Apply" для применения изменений к материалу.
2. В окне "Material Inspector" проверьте результат.

![Graph Inspector](images/graph_inspector.png)

## Завершение работы

1. Сохраните материал: в окне "Shader Editor" выберите "File > Save".
2. Закройте Shader Editor.

Теперь вы создали материал с использованием Shader Editor! Если у вас возникли проблемы или вопросы, пожалуйста, обратитесь к Issue Tracker.

![Issue Tracker](images/issue_tracker.png)

```javascript
"key plural": [
    "Ноль элементов", // plural form ZERO
    "Один элемент", // plural form ONE
    "Два элемента", // plural form TWO
    "Несколько элементов", // plural form FEW
    "Много элементов", // plural form MANY
    "Остальные", // plural form OTHER
]
```

Обратитесь к таблицам языков [здесь][1], чтобы определить правила для каждого языка.

После создания ваших локализационных JSON-файлов вам нужно добавить их в настройки редактора в разделе LOCALIZATION.

## Локализация текстовых элементов

Включите флажок `Localized` для текстового элемента, чтобы использовать файлы локализации для перевода его текста. Текст, который вы вводите в поле `Key` текстового элемента, должен соответствовать ключу в файле локализации.

Для проверки вашей локализации вы можете изменить поле `Locale` в настройках редактора. Это должно обновить область просмотра вашего редактора на этот язык, а также обновить используемый язык при запуске вашего приложения. Это поле не используется при публикации или загрузке сборки.

## Локализация чисел

Разные языки имеют разные правила форматирования чисел. Например, английский (Великобритания и США) отформатирует `1000000` как `1,000,000`, а голландский - с десятичной точкой `1.000.000`.

JavaScript предоставляет встроенную функцию для форматирования на основе кода языка, [`Number.protoype.toLocaleString()`][5].

Пример использования:

```javascript
var numberOfItems = 1000;
var currentLocale = this.app.i18n.locale;
var localeNumberString = numberOfItems.toLocaleString(currentLocale);

console.log(localeNumberString);
// ожидаемый вывод, предполагая что currentLocale это en-US: "1,000"
```

## Локализованные шрифты

Часто вы можете обнаружить, что для разных языков могут потребоваться разные шрифты. Чтобы определить другой шрифт для определенного языка, выберите основной шрифт Asset, который вы используете для вашего текстового элемента, и в нижней части атрибутов Asset вы найдете раздел локализации для этого шрифта Asset. Введите желаемую локаль и назначьте новый шрифт Asset для этой локали.

Во время выполнения, когда приложение переключается на другую локаль, оно загрузит шрифт Asset, который вы определили для этой локали.

![Localized Fonts Inspector][9]

## Языковые заметки

Некоторые языки требуют специфических рабочих процессов или учета, которые перечислены ниже.

### Тайский

Для корректной работы переноса слов в текстовых элементах пользовательского интерфейса с тайским текстом переводчикам необходимо добавлять [нулевые ширинные символы (Unicode U+200B)][7] между словами.

В тайском языке между словами нет пробелов, и одна и та же последовательность глифов может быть разделена на разные комбинации слов в зависимости от контекста предложения.

Корректное разделение тайского текста на компьютере до сих пор остается [нерешенной проблемой][6] и обычно выполняется на основе словарного подхода, который может быть дорогостоящим во время выполнения.

[На сайте thai-language.com также есть отдельный инструмент][8] для добавления нулевых ширинных символов между словами с использованием словарного подхода, если у вас уже есть текст.

### Языки справа налево

Для поддержки языков с направлением письма справа налево потребуются дополнительные скрипты, которые можно найти в [этом примере проекта][10].

В примере проекта есть папка с названием "Rtl Support", которую нужно [скопировать и вставить][11] в ваш проект.

![][12]

В папке есть тип скрипта под названием "RtlElement", который должен быть добавлен к любому Entity с компонентом текстового элемента, который будет использоваться для отображения текста справа налево.

![][13]

## Движок

Чтобы получить текст из ключа в скрипте, используйте API:

* [pc.I18n#getText][3] Чтобы получить не множественную или первую текстовую строку в списке множественных чисел
* [pc.I18n#getPluralText][4] Чтобы получить множественную текстовую строку на основе числа

Для полного справочника API движка по локализации см. [эту страницу][2].

[1]: https://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html
[2]: /api/pc.I18n.html
[3]: /api/pc.I18n.html#getText
[4]: /api/pc.I18n.html#getPluralText
[5]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString
[6]: http://www.thai-language.com/ref/breaking-words
[7]: https://en.wikipedia.org/wiki/Zero-width_space
[8]: http://www.thai-language.com/?nav=zwsp
[9]: /images/user-manual/user-interface/localization/localized-fonts-inspector.gif
[10]: /tutorials/right-to-left-language-support/
[11]: /user-manual/designer/assets/#copy-and-paste-between-projects
[12]: /images/user-manual/user-interface/localization/rtl-asset-folder.png
[13]: /images/user-manual/user-interface/localization/adding-rtl-script-type.png
