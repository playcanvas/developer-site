---
title: アセットインポートパイプライン
layout: usermanual-page.hbs
position: 2
---

一部のアセットは、ランタイムでゲームで使用する前に、"ターゲット"フォーマットに変換する必要があります。このプロセスを*インポート*と呼びます。たとえば、3DモデルはFBXファイルとしてアップロードできますが、ゲームで読み込む前にPlayCanvas互換のモデルファイルに変換する必要があります。

一部のアセットは、使用する前にインポートする必要はありません。たとえば、PNG画像はすぐにテクスチャとして使用できます。

## アセットタスク

ソースアセットがアップロードされると、PlayCanvasは当社のサーバー上でこのインポートプロセスを実行するアセットタスクを開始します。

インポートパイプラインの動作を調整するためのさまざまなオプションがあります。

<img loading="lazy" src="/images/user-manual/assets/import-pipeline/asset-tasks.png" width="480">

### 関連アセットを検索

ファイルの新しいバージョンをアップロードしてソースアセットを更新する場合、インポートパイプラインによって作成されたターゲットアセットを更新する2つの可能性があります。

* **関連アセットの検索**が有効になっている場合、パイプラインはフォルダーに関係なくターゲットアセットを更新します。
* **関連アセットの検索**が有効になっていない場合、パイプラインはターゲットアセットをソースアセットと同じフォルダーでのみ検索します。

つまり、これを有効にしておくと、ソースアセットとターゲットアセットをフォルダーに整理し、ソースアセットを更新したときに関連するすべてのアセットが更新されることが保証されます。

### アセットのデフォルトをプリロードに設定

新しく作成されたアセットは、このオプションが有効または無効かどうかに応じて、自動的に[プリロード][2]に設定されます。これにはJavaScriptのスクリプトファイルは含まれません。JavaScriptのスクリプトファイルは、作成されたときに常にプリロードされます。

## テクスチャインポート設定

これらのオプションは、画像とテクスチャのインポートにのみ影響を与えます。

### テクスチャPOT(Power of Two)

このオプションが有効になっている場合、2の累乗でないテクスチャは、インポート時に最も近い2の累乗解像度に変換されます。

### アトラスを作成

アップロードされた画像は、通常のTextureアセットではなく、テクスチャアトラスとしてインポートされます。これは、多くのスプライトシートやUIアセットをアップロードする場合に便利です。

## モデルインポート設定

これらのオプションは、モデルまたはシーンファイル(FBX、Collada、objなど)のインポートにのみ影響を与えます。

### マテリアルマッピングを保持

モデルファイルが更新または再インポートされた場合、エディターはそれに設定されたマテリアルマッピングを保持しようとします。

### モデルを上書き

モデルファイルが更新または再インポートされた場合、このオプションによってターゲットモデルファイルが上書きされるかどうかが決まります。新しいモデルで上書きすることがデフォルトの動作です。

### アニメーションを上書き

モデルファイルが更新または再インポートされた場合、このオプションによってモデルから作成されたアニメーションが上書きされるかどうかが決まります。新しいアニメーションで上書きすることがデフォルトの動作です。

### マテリアルを上書き

モデルファイルが更新または再インポートされた場合、このオプションによってモデルから作成されたマテリアルが上書きされるかどうかが決まります。既存のマテリアルを残すことがデフォルトの動作です。

### テクスチャを上書き

モデルファイルが更新または再インポートされた場合、このオプションによってモデルから作成されたテクスチャが上書きされるかどうかが決まります。既存のテクスチャを新しいテクスチャで上書きすることがデフォルトの動作です。

### GLBに変換

新しいプロジェクトではデフォルトで有効になっています。インポートされたモデルとアニメーションは、古い非推奨のJSON形式ではなく、GLBモデルとアニメーションアセットが作成されます。

### ヒエラルキーをインポート

[GLBに変換する](#GLBに変換する)オプションを使用している場合にのみ利用可能です。モデルファイルがインポートされると、エンティティとしてモデル全体のフルヒエラルキーを含むTemplateアセットが作成され、エディタで直接操作することができます。この機能についての詳細は、[こちら][3]を参照してください。

### メッシュ圧縮

[GLBに変換する](#GLBに変換する)オプションを使用している場合にのみ利用可能です。このオプションを圧縮形式に設定すると、モデルファイルをインポートまたは再インポートするときに自動的にメッシュデータが圧縮されます。これにより、GLBファイルのサイズを大幅に縮小できますが、ランタイムの解凍コストがかかります。

Draco圧縮を使用する場合は、プロジェクトにDraco WASMモジュールをインポートする必要があることに注意してください。さもなければ、モデルは読み込まれません。

<img loading="lazy" src="/images/user-manual/assets/import-pipeline/draco-import-button.png" width="480">

### FBXフォルダの作成

モデルファイル(GLBまたはFBXなど)をインポートすると、エディタはレンダリング、テンプレート、マテリアルアセットなどのインポート時に作成されるアセットのフォルダーを作成します。

現在のフォルダーにすでにモデル(ソース)ファイルがあるか、インポートされるファイルと同じ名前のフォルダーがある場合、新しいフォルダーを作成する代わりに既存のアセットが上書きされます。

## アニメーションインポート設定

詳細については、[アニメーションセクション][4]を参照してください。

[2]: /user-manual/assets/preloading-and-streaming/
[3]: /user-manual/assets/import-pipeline/import-hierarchy/
[4]: /user-manual/assets/animation/
