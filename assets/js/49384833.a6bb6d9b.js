"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[60101],{22443:(e,n,r)=>{r.d(n,{A:()=>a});const a=r.p+"assets/images/hdr-70662c916a793233ee905931f4948ed1.webp"},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var a=r(96540);const i={},s=a.createContext(i);function t(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),a.createElement(s.Provider,{value:n},e.children)}},57149:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"user-manual/graphics/linear-workflow/hdr-rendering","title":"HDR Rendering","description":"High Dynamic Range (HDR) rendering significantly enhances visual realism in computer graphics by capturing and displaying a broader spectrum of light and color. This technique ensures that both the brightest highlights and the deepest shadows retain their details, offering a more lifelike representation of scenes. One notable advantage of HDR rendering is its ability to produce physically based bloom effects, where intense light sources naturally bleed into surrounding areas, mimicking real-world camera and eye behavior. Additionally, HDR rendering facilitates more accurate reflections and refractions, as it allows for light values that exceed the standard displayable range, resulting in visuals that are both striking and true to life.","source":"@site/docs/user-manual/graphics/linear-workflow/hdr-rendering.md","sourceDirName":"user-manual/graphics/linear-workflow","slug":"/user-manual/graphics/linear-workflow/hdr-rendering","permalink":"/user-manual/graphics/linear-workflow/hdr-rendering","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/graphics/linear-workflow/hdr-rendering.md","tags":[],"version":"current","frontMatter":{"title":"HDR Rendering"},"sidebar":"userManualSidebar","previous":{"title":"Textures","permalink":"/user-manual/graphics/linear-workflow/textures"},"next":{"title":"Shaders","permalink":"/user-manual/graphics/shaders/"}}');var i=r(74848),s=r(28453);const t={title:"HDR Rendering"},l=void 0,o={},c=[{value:"Camera Settings",id:"camera-settings",level:2},{value:"LDR (Low Dynamic Range)",id:"ldr-low-dynamic-range",level:3},{value:"HDR (High Dynamic Range)",id:"hdr-high-dynamic-range",level:3},{value:"HDR Display Output",id:"hdr-display-output",level:3},{value:"PlayCanvas Engine - CameraFrame Class",id:"playcanvas-engine---cameraframe-class",level:2},{value:"Key Features of CameraFrame",id:"key-features-of-cameraframe",level:3},{value:"Configuring CameraFrame on a Camera",id:"configuring-cameraframe-on-a-camera",level:3},{value:"CameraFrame in the Editor",id:"cameraframe-in-the-editor",level:2},{value:"Instructions on Use",id:"instructions-on-use",level:3},{value:"CameraFrame Tips",id:"cameraframe-tips",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"High Dynamic Range (HDR) rendering significantly enhances visual realism in computer graphics by capturing and displaying a broader spectrum of light and color. This technique ensures that both the brightest highlights and the deepest shadows retain their details, offering a more lifelike representation of scenes. One notable advantage of HDR rendering is its ability to produce physically based bloom effects, where intense light sources naturally bleed into surrounding areas, mimicking real-world camera and eye behavior. Additionally, HDR rendering facilitates more accurate reflections and refractions, as it allows for light values that exceed the standard displayable range, resulting in visuals that are both striking and true to life."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"HDR",src:r(22443).A+"",width:"1527",height:"1110"})}),"\n",(0,i.jsx)(n.h2,{id:"camera-settings",children:"Camera Settings"}),"\n",(0,i.jsx)(n.p,{children:"The camera provides two key settings for handling HDR rendering:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"gammaCorrection"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"toneMapping"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These settings can be configured based on the rendering mode."}),"\n",(0,i.jsx)(n.h3,{id:"ldr-low-dynamic-range",children:"LDR (Low Dynamic Range)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"toneMapping"}),": For LDR rendering, you can select any tone mapping method to achieve the desired visual style. The tone mapping compresses HDR values into displayable LDR values."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"gammaCorrection"}),": Set to ",(0,i.jsx)(n.code,{children:"GAMMA_SRGB"})," to indicate that the output should be stored in gamma space, as it represents colors.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If the output pixel format is sRGB, gamma correction is handled by the hardware."}),"\n",(0,i.jsx)(n.li,{children:"Otherwise, gamma encoding is applied in shader code."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"hdr-high-dynamic-range",children:"HDR (High Dynamic Range)"}),"\n",(0,i.jsx)(n.p,{children:"For HDR rendering, the goal is to preserve HDR colour information:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"toneMapping"}),": Set to ",(0,i.jsx)(n.code,{children:"TONEMAP_LINEAR"})," to maintain HDR colours."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"gammaCorrection"}),": Disable by setting to ",(0,i.jsx)(n.code,{children:"GAMMA_NONE"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Ensure that a compatible HDR pixel format is used for the render target. This format can be obtained using the ",(0,i.jsx)(n.code,{children:"GraphicsDevice.getRenderableHdrFormat()"})," API."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"hdr-display-output",children:"HDR Display Output"}),"\n",(0,i.jsxs)(n.p,{children:["When rendering in HDR mode, an HDR display output can be enabled by configuring the ",(0,i.jsx)(n.code,{children:"Application"})," with the ",(0,i.jsx)(n.code,{children:"displayFormat"})," parameter set to ",(0,i.jsx)(n.code,{children:"DISPLAYFORMAT_HDR"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"toneMapping"}),": If HDR output is supported, set to ",(0,i.jsx)(n.code,{children:"TONEMAP_NONE"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"gammaCorrection"}),": Keep set to ",(0,i.jsx)(n.code,{children:"GAMMA_SRGB"})," to ensure low-intensity values remain visually similar to LDR rendering."]}),"\n",(0,i.jsxs)(n.li,{children:["After the device has been created, check if HDR display output is supported using ",(0,i.jsx)(n.code,{children:"GraphicsDevice.isHdr()"}),". Note that for ",(0,i.jsx)(n.code,{children:"isHdr()"})," to return ",(0,i.jsx)(n.code,{children:"true"}),", the browser must be running on a display that supports HDR output."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Currently, HDR display output is only supported by WebGPU. On other platforms, ",(0,i.jsx)(n.code,{children:"GraphicsDevice.isHdr()"})," will always return ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"playcanvas-engine---cameraframe-class",children:"PlayCanvas Engine - CameraFrame Class"}),"\n",(0,i.jsxs)(n.p,{children:["The PlayCanvas Engine offers a comprehensive rendering setup through the ",(0,i.jsx)(n.code,{children:"CameraFrame"})," class, which integrates advanced effects such as High Dynamic Range (HDR) rendering, bloom, Screen Space Ambient Occlusion (SSAO), and more. This setup enhances visual fidelity by simulating realistic lighting and post-processing effects."]}),"\n",(0,i.jsx)(n.h3,{id:"key-features-of-cameraframe",children:"Key Features of CameraFrame"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bloom"}),": Simulates the scattering of light to create a glow around bright areas."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SSAO"}),": Enhances depth perception by simulating ambient light occlusion in crevices and corners."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Depth of Field (DoF)"}),": Mimics camera focus effects, blurring objects outside the focal plane."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Temporal Anti-Aliasing (TAA)"}),": Reduces visual artifacts by smoothing jagged edges over time."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vignette"}),": Darkens the image's corners to draw attention to the center."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Color Grading"}),": Adjusts the color balance for stylistic effects."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"configuring-cameraframe-on-a-camera",children:"Configuring CameraFrame on a Camera"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const cameraFrame = new pc.CameraFrame(app, cameraEntity.camera);\ncameraFrame.rendering.toneMapping = pc.TONEMAP_NEUTRAL;\ncameraFrame.rendering.samples = 4;\ncameraFrame.bloom.enabled = true;\ncameraFrame.bloom.intensity = 0.01;\ncameraFrame.update();\n"})}),"\n",(0,i.jsx)(n.p,{children:"For HDR bloom to be effective, the scene should include bright light sources. This is typically achieved using emissive materials with high intensity. For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"material.emissive = pc.Color.YELLOW;\nmaterial.emissiveIntensity = 50;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more detailed information, refer to the CameraFrame ",(0,i.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/CameraFrame.html",children:"API documentation"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"cameraframe-in-the-editor",children:"CameraFrame in the Editor"}),"\n",(0,i.jsxs)(n.p,{children:["There is a ",(0,i.jsx)(n.code,{children:"CameraScript"})," ",(0,i.jsx)(n.a,{href:"https://github.com/playcanvas/engine/blob/main/scripts/esm/camera-frame.mjs",children:"available here"})," for the PlayCanvas Editor project. This script integrates ",(0,i.jsx)(n.code,{children:"CameraFrame"})," functionality directly into the Editor's Inspector, making it easy to set up and configure cameras with advanced rendering features."]}),"\n",(0,i.jsx)(n.h3,{id:"instructions-on-use",children:"Instructions on Use"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Add the ",(0,i.jsx)(n.code,{children:"CameraScript"})," into your project and parse it."]}),"\n",(0,i.jsxs)(n.li,{children:["Add it to an entity that has the ",(0,i.jsx)(n.code,{children:"CameraComponent"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Use the Inspector to configure the rendering settings for the camera, such as tone mapping, bloom, SSAO, and other effects."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This integration streamlines the process of setting up complex camera effects and enhances the overall workflow within the PlayCanvas Editor."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"CameraFrame Script",src:r(66431).A+"",width:"471",height:"1152"})}),"\n",(0,i.jsx)(n.h2,{id:"cameraframe-tips",children:"CameraFrame Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"HDR bloom requires at least one renderable float format (e.g., RG11B10, RGBA16F, or RGBA32F). If none of these formats are supported by the device, HDR bloom is automatically disabled."}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"toneMapping"})," property of ",(0,i.jsx)(n.code,{children:"StandardMaterial"})," is ignored. Tonemapping is applied as a full-screen post-processing pass, so per-mesh tonemapping control is not possible."]}),"\n",(0,i.jsxs)(n.li,{children:["When using ",(0,i.jsx)(n.code,{children:"CameraFrame"}),", two properties control tonemapping:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CameraFrame.rendering.toneMapping"})," \u2013 Controls tonemapping for the 3D scene rendered within the ",(0,i.jsx)(n.code,{children:"CameraFrame"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CameraComponent.toneMapping"})," \u2013 Controls tonemapping applied after the 3D scene including post-processing is rendered. This typically affects UI elements rendered on top."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["When using ",(0,i.jsx)(n.code,{children:"CameraFrame"}),", you may notice differences in the intensity of alpha-blended geometry. This occurs because blending takes place in linear HDR space, which is more physically accurate than blending in gamma space. As a result, you may need to adjust material properties related to alpha blending."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},66431:(e,n,r)=>{r.d(n,{A:()=>a});const a=r.p+"assets/images/camera-frame-954ca1f3ea1aab901f50d09e005129be.png"}}]);