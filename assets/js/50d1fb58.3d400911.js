"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[77210],{28453:(e,s,a)=>{a.d(s,{R:()=>r,x:()=>i});var n=a(96540);const t={},l=n.createContext(t);function r(e){const s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),n.createElement(l.Provider,{value:s},e.children)}},48987:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"user-manual/assets/preloading","title":"Preloading","description":"On the web, it\'s critical to get users into your application as soon as possible. The PlayCanvas asset system provides preloading to ensure essential assets are ready before your application starts.","source":"@site/docs/user-manual/assets/preloading.md","sourceDirName":"user-manual/assets","slug":"/user-manual/assets/preloading","permalink":"/user-manual/assets/preloading","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/assets/preloading.md","tags":[],"version":"current","frontMatter":{"title":"Preloading"},"sidebar":"userManualSidebar","previous":{"title":"Asset Registry","permalink":"/user-manual/assets/asset-registry"},"next":{"title":"Loading and Unloading","permalink":"/user-manual/assets/loading-unloading"}}');var t=a(74848),l=a(28453);const r={title:"Preloading"},i=void 0,o={},d=[{value:"The Preload Flag",id:"the-preload-flag",level:2},{value:"When Are Assets Loaded?",id:"when-are-assets-loaded",level:2},{value:"Streaming vs Preloading",id:"streaming-vs-preloading",level:2},{value:"Loading Asset Groups with Tags",id:"loading-asset-groups-with-tags",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"On the web, it's critical to get users into your application as soon as possible. The PlayCanvas asset system provides preloading to ensure essential assets are ready before your application starts."}),"\n",(0,t.jsx)(s.h2,{id:"the-preload-flag",children:"The Preload Flag"}),"\n",(0,t.jsxs)(s.p,{children:["Every asset has a ",(0,t.jsx)(s.code,{children:"preload"})," property. When set to ",(0,t.jsx)(s.code,{children:"true"}),", the asset will be downloaded and its resource created before the application's ",(0,t.jsx)(s.code,{children:"initialize"})," phase begins."]}),"\n",(0,t.jsx)(s.p,{children:'You should use preloading for assets that are needed immediately when your application starts. This prevents assets from "popping in" after the application is already running.'}),"\n",(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsx)(s.p,{children:"In the PlayCanvas Editor, you can set the preload flag in the asset's properties panel. By default, new assets have preload enabled."})}),"\n",(0,t.jsx)(s.h2,{id:"when-are-assets-loaded",children:"When Are Assets Loaded?"}),"\n",(0,t.jsx)(s.p,{children:"Assets are loaded according to these rules:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Preloaded assets"})," (",(0,t.jsx)(s.code,{children:"preload = true"}),") are loaded before the application starts"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Referenced assets"})," are loaded when an enabled component references them. For entities enabled in the scene, this happens immediately after preloading completes"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Dependent assets"})," are loaded when their parent asset loads. For example, when a model loads, its referenced materials load, which in turn load their referenced textures"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"streaming-vs-preloading",children:"Streaming vs Preloading"}),"\n",(0,t.jsx)(s.p,{children:'If an asset is not preloaded, it will be streamed in when needed. Components handle this gracefully and begin operating once their assets are ready. However, you may see visual "popup" as models appear before their textures finish loading.'}),"\n",(0,t.jsx)(s.h2,{id:"loading-asset-groups-with-tags",children:"Loading Asset Groups with Tags"}),"\n",(0,t.jsx)(s.p,{children:"To avoid popup, you can load groups of assets before displaying them. Use asset tags to organize assets into logical groups:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"// Find all assets tagged for level 1\nconst assets = this.app.assets.findByTag('level-1');\nlet loadedCount = 0;\n\n// Load each asset\nfor (const asset of assets) {\n    asset.once('load', () => {\n        loadedCount++;\n        if (loadedCount === assets.length) {\n            // All level-1 assets are loaded\n            this.startLevel();\n        }\n    });\n    this.app.assets.load(asset);\n}\n"})}),"\n",(0,t.jsx)(s.p,{children:"You can also use more complex tag queries:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"// Assets tagged with BOTH 'level-1' AND 'enemy'\nconst enemies = this.app.assets.findByTag('level-1', 'enemy');\n\n// Assets tagged with 'level-1' OR 'level-2'\nconst assets = this.app.assets.findByTag(['level-1', 'level-2']);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Preload essential assets"})," - UI elements, player models, and anything needed immediately"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Stream large assets"})," - Background music, distant scenery, optional content"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Use tags for levels"})," - Group assets by level or area to load them together"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Show loading progress"})," - For streamed content, display a loading indicator"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/user-manual/assets/asset-registry",children:"Asset Registry"})," - Finding and managing assets"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/user-manual/assets/loading-unloading",children:"Loading and Unloading"})," - Dynamic asset management"]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);