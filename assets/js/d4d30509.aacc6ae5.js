"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[39252],{24076:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>a,toc:()=>r});const a=JSON.parse('{"id":"user-manual/assets/loading-unloading","title":"Loading and Unloading","description":"PlayCanvas provides APIs to dynamically load and unload assets at runtime. This gives you fine-grained control over memory usage and allows you to stream content as needed.","source":"@site/docs/user-manual/assets/loading-unloading.md","sourceDirName":"user-manual/assets","slug":"/user-manual/assets/loading-unloading","permalink":"/user-manual/assets/loading-unloading","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/assets/loading-unloading.md","tags":[],"version":"current","frontMatter":{"title":"Loading and Unloading"},"sidebar":"userManualSidebar","previous":{"title":"Preloading","permalink":"/user-manual/assets/preloading"},"next":{"title":"Supported Formats","permalink":"/user-manual/assets/supported-formats"}}');var t=n(74848),l=n(28453);const d={title:"Loading and Unloading"},i=void 0,o={},r=[{value:"Loading Assets",id:"loading-assets",level:2},{value:"Loading Registered Assets",id:"loading-registered-assets",level:3},{value:"Loading from URL",id:"loading-from-url",level:3},{value:"Loading with Options",id:"loading-with-options",level:3},{value:"Handling Load Events",id:"handling-load-events",level:2},{value:"Using ready()",id:"using-ready",level:3},{value:"Using Events",id:"using-events",level:3},{value:"Unloading Assets",id:"unloading-assets",level:2},{value:"Removing Assets",id:"removing-assets",level:3},{value:"Loading Multiple Assets",id:"loading-multiple-assets",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function c(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"PlayCanvas provides APIs to dynamically load and unload assets at runtime. This gives you fine-grained control over memory usage and allows you to stream content as needed."}),"\n",(0,t.jsx)(s.h2,{id:"loading-assets",children:"Loading Assets"}),"\n",(0,t.jsx)(s.h3,{id:"loading-registered-assets",children:"Loading Registered Assets"}),"\n",(0,t.jsxs)(s.p,{children:["For assets that are already in the asset registry (e.g., assets added in the Editor), use ",(0,t.jsx)(s.code,{children:"app.assets.load()"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"const asset = this.app.assets.find('My Texture');\n\nasset.ready((asset) => {\n    // Asset is loaded and ready to use\n    const texture = asset.resource;\n});\n\nthis.app.assets.load(asset);\n"})}),"\n",(0,t.jsx)(s.h3,{id:"loading-from-url",children:"Loading from URL"}),"\n",(0,t.jsxs)(s.p,{children:["To load an asset from a URL at runtime, use ",(0,t.jsx)(s.code,{children:"app.assets.loadFromUrl()"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"this.app.assets.loadFromUrl('path/to/texture.png', 'texture', (err, asset) => {\n    if (err) {\n        console.error('Failed to load texture:', err);\n        return;\n    }\n    \n    // Asset is loaded and added to the registry\n    const texture = asset.resource;\n});\n"})}),"\n",(0,t.jsx)(s.p,{children:"The second parameter specifies the asset type. Common types include:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"texture"})," - Images (PNG, JPG, WebP, etc.)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"model"})," - 3D models (GLB)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"audio"})," - Sound files (MP3, OGG, WAV)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"json"})," - JSON data"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"binary"})," - Binary data"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"css"})," - Stylesheets"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"html"})," - HTML documents"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"script"})," - JavaScript files"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"shader"})," - Shader code"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"loading-with-options",children:"Loading with Options"}),"\n",(0,t.jsx)(s.p,{children:"You can pass additional options when loading from URL:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"this.app.assets.loadFromUrlAndFilename(\n    'path/to/model.glb',\n    'model.glb',\n    'container',\n    (err, asset) => {\n        if (err) {\n            console.error('Failed to load model:', err);\n            return;\n        }\n        \n        // Create an entity from the loaded model\n        const entity = asset.resource.instantiateRenderEntity();\n        this.app.root.addChild(entity);\n    }\n);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"handling-load-events",children:"Handling Load Events"}),"\n",(0,t.jsx)(s.h3,{id:"using-ready",children:"Using ready()"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"ready()"})," method executes a callback when an asset is loaded. If the asset is already loaded, the callback fires immediately:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"const asset = this.app.assets.find('My Model');\n\nasset.ready((asset) => {\n    // Safe to use asset.resource here\n});\n\n// Trigger loading if not already loaded\nif (!asset.loaded) {\n    this.app.assets.load(asset);\n}\n"})}),"\n",(0,t.jsx)(s.h3,{id:"using-events",children:"Using Events"}),"\n",(0,t.jsx)(s.p,{children:"You can listen for load events on individual assets or the registry:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"// Listen on a specific asset\nasset.on('load', (asset) => {\n    console.log('Asset loaded:', asset.name);\n});\n\nasset.on('error', (err, asset) => {\n    console.error('Load failed:', asset.name, err);\n});\n\n// Listen on the registry for any asset\nthis.app.assets.on('load', (asset) => {\n    console.log('Some asset loaded:', asset.name);\n});\n"})}),"\n",(0,t.jsx)(s.h2,{id:"unloading-assets",children:"Unloading Assets"}),"\n",(0,t.jsx)(s.p,{children:"To free memory, you can unload assets that are no longer needed:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"const asset = this.app.assets.find('Large Texture');\n\n// Unload the resource but keep the asset in the registry\nasset.unload();\n\n// The asset can be loaded again later\nthis.app.assets.load(asset);\n"})}),"\n",(0,t.jsx)(s.h3,{id:"removing-assets",children:"Removing Assets"}),"\n",(0,t.jsx)(s.p,{children:"To completely remove an asset from the registry:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"const asset = this.app.assets.find('Temporary Asset');\n\n// Remove from registry (also unloads the resource)\nthis.app.assets.remove(asset);\n"})}),"\n",(0,t.jsx)(s.h2,{id:"loading-multiple-assets",children:"Loading Multiple Assets"}),"\n",(0,t.jsx)(s.p,{children:"To load multiple assets and wait for all of them:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"const assetNames = ['texture1', 'texture2', 'model1'];\nconst assets = assetNames.map(name => this.app.assets.find(name));\n\nlet loaded = 0;\nconst total = assets.length;\n\nconst onAssetLoad = () => {\n    loaded++;\n    if (loaded === total) {\n        // All assets loaded\n        this.onAllAssetsReady();\n    }\n};\n\nfor (const asset of assets) {\n    asset.ready(onAssetLoad);\n    if (!asset.loaded) {\n        this.app.assets.load(asset);\n    }\n}\n"})}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Unload unused assets"})," - Free memory by unloading assets when changing levels or scenes"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Use ready()"})," - It handles both loaded and not-yet-loaded cases"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Handle errors"})," - Always provide error handling for dynamic loads"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Batch loads"})," - Load related assets together to avoid visual inconsistencies"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/user-manual/assets/asset-registry",children:"Asset Registry"})," - Finding and managing assets"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/user-manual/assets/preloading",children:"Preloading"})," - Loading assets before your app starts"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>i});var a=n(96540);const t={},l=a.createContext(t);function d(e){const s=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),a.createElement(l.Provider,{value:s},e.children)}}}]);