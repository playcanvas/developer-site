"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[22328],{2085:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/split-anchors-785bbc18652c7d50f1ec716a00e433df.png"},6958:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/score-75cfc5f3dc0e9cbc2752a9f2801f2b9e.png"},11470:(e,t,a)=>{a.d(t,{A:()=>S});var n=a(96540),r=a(34164),s=a(17559),l=a(23104),i=a(56347),o=a(205),c=a(57485),d=a(31682),h=a(70679);function u(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:t,children:a}=e;return(0,n.useMemo)(()=>{const e=t??function(e){return u(e).map(({props:{value:e,label:t,attributes:a,default:n}})=>({value:e,label:t,attributes:a,default:n}))}(a);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,a])}function m({value:e,tabValues:t}){return t.some(t=>t.value===e)}function f({queryString:e=!1,groupId:t}){const a=(0,i.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(r),(0,n.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})},[r,a])]}function b(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,s=p(e),[l,i]=(0,n.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find(e=>e.default)??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s})),[c,d]=f({queryString:a,groupId:r}),[u,b]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,r]=(0,h.Dv)(t);return[a,(0,n.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),y=(()=>{const e=c??u;return m({value:e,tabValues:s})?e:null})();(0,o.A)(()=>{y&&i(y)},[y]);return{selectedValue:l,selectValue:(0,n.useCallback)(e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),b(e)},[d,b,s]),tabValues:s}}var y=a(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(74848);function v({className:e,block:t,selectedValue:a,selectValue:n,tabValues:s}){const i=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),c=e=>{const t=e.currentTarget,r=i.indexOf(t),l=s[r].value;l!==a&&(o(t),n(l))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=i.indexOf(e.currentTarget)+1;t=i[a]??i[0];break}case"ArrowLeft":{const a=i.indexOf(e.currentTarget)-1;t=i[a]??i[i.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:s.map(({value:e,label:t,attributes:n})=>(0,x.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{i.push(e)},onKeyDown:d,onClick:c,...n,className:(0,r.A)("tabs__item",g.tabItem,n?.className,{"tabs__item--active":a===e}),children:t??e},e))})}function j({lazy:e,children:t,selectedValue:a}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===a);return e?(0,n.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a}))})}function w(e){const t=b(e);return(0,x.jsxs)("div",{className:(0,r.A)(s.G.tabs.container,"tabs-container",g.tabList),children:[(0,x.jsx)(v,{...t,...e}),(0,x.jsx)(j,{...t,...e})]})}function S(e){const t=(0,y.A)();return(0,x.jsx)(w,{...e,children:u(e.children)},String(t))}},19365:(e,t,a)=>{a.d(t,{A:()=>l});a(96540);var n=a(34164);const r={tabItem:"tabItem_Ymn6"};var s=a(74848);function l({children:e,hidden:t,className:a}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(r.tabItem,a),hidden:t,children:e})}},27601:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/hierarchy-31179641ab06f217e74ba891bc3f3436.png"},28453:(e,t,a)=>{a.d(t,{R:()=>l,x:()=>i});var n=a(96540);const r={},s=n.createContext(r);function l(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(s.Provider,{value:t},e.children)}},42915:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/name-41104e2aff88df08646708fa67f2351a.png"},44933:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/group-31c7470a078a3d202dd706e31fd55a0f.png"},50590:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/screen-0e94de15ffaaf5be24a228bd513cb1e9.png"},62911:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/pts-8d21723d12b206c19beee4e403396682.png"},75182:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"tutorials/ui-elements-leaderboard","title":"User Interface - Leaderboard","description":"A leaderboard using Element components. See the full scene.","source":"@site/docs/tutorials/ui-elements-leaderboard.md","sourceDirName":"tutorials","slug":"/tutorials/ui-elements-leaderboard","permalink":"/tutorials/ui-elements-leaderboard","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/ui-elements-leaderboard.md","tags":[{"inline":true,"label":"ui","permalink":"/tags/ui"}],"version":"current","frontMatter":{"title":"User Interface - Leaderboard","tags":["ui"],"thumb":"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/501980/2D16F7-image-75.jpg"},"sidebar":"tutorialsSidebar","previous":{"title":"User Interface - Buttons","permalink":"/tutorials/ui-elements-buttons"},"next":{"title":"User Interface - Progress Bar","permalink":"/tutorials/ui-elements-progress"}}');var r=a(74848),s=a(28453),l=a(11470),i=a(19365);const o={title:"User Interface - Leaderboard",tags:["ui"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/501980/2D16F7-image-75.jpg"},c=void 0,d={},h=[{value:"Hierarchy",id:"hierarchy",level:2},{value:"Screen setup",id:"screen-setup",level:2},{value:"Panel setup",id:"panel-setup",level:2},{value:"Entry Template setup",id:"entry-template-setup",level:2},{value:"Position",id:"position",level:3},{value:"Name",id:"name",level:3},{value:"Score",id:"score",level:3},{value:"Points",id:"points",level:3},{value:"Script",id:"script",level:2}];function u(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"iframe-container",children:(0,r.jsx)("iframe",{src:"https://playcanv.as/p/nbMbtAGH/",title:"User Interface - Leaderboard",allow:"camera; microphone; xr-spatial-tracking; fullscreen",allowfullscreen:!0})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsxs)(t.em,{children:["A leaderboard using Element components. See the ",(0,r.jsx)(t.a,{href:"https://playcanvas.com/editor/scene/547907",children:"full scene"}),"."]})}),"\n",(0,r.jsxs)(t.p,{children:["This tutorial demonstrates how to create a simple leaderboard using the built-in ",(0,r.jsx)(t.a,{href:"/user-manual/user-interface/elements/",children:"Elements"}),". The leaderboard is filled programmatically with data that come from a JSON asset."]}),"\n",(0,r.jsx)(t.h2,{id:"hierarchy",children:"Hierarchy"}),"\n",(0,r.jsx)(t.p,{children:"This is what our UI looks like in the hierarchy:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Hierarchy",src:a(27601).A+"",width:"257",height:"150"})}),"\n",(0,r.jsxs)(t.p,{children:["As you can see we have a 2D ",(0,r.jsx)(t.a,{href:"/user-manual/user-interface/screens/",children:"Screen"}),", two Elements to show the title and sub title and two Image Elements which are going to be used as the backgrounds and panels for our leaderboard data. Under ",(0,r.jsx)(t.code,{children:"Your Score"})," we are going to show the player's position in the leaderboard and under ",(0,r.jsx)(t.code,{children:"Leaderboard"})," we will show the rest."]}),"\n",(0,r.jsxs)(t.p,{children:["You will also notice a disabled Entity called ",(0,r.jsx)(t.code,{children:"Entry Template"}),". This is a template that we will use for each row of the template. We will clone that template for each leaderboard entry that exists in our JSON asset and add each clone under the respective panel."]}),"\n",(0,r.jsx)(t.h2,{id:"screen-setup",children:"Screen setup"}),"\n",(0,r.jsxs)(t.p,{children:["Our ",(0,r.jsx)(t.a,{href:"/user-manual/user-interface/screens/",children:"screen"})," is set up like so:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Screen",src:a(50590).A+"",width:"322",height:"632"})}),"\n",(0,r.jsx)(t.p,{children:"Since it's a 2D screen we have ticked Screen Space. Our Reference Resolution is the resolution that we are targeting - in this case it's 1080 x 1920. We choose Blend for Scale Mode so that our Screen adapts to resolution changes and we set Scale Blend to 1 so that the Screen will adapt only to height changes."}),"\n",(0,r.jsxs)(t.p,{children:["The screen entity also has a script component that contains the ",(0,r.jsx)(t.code,{children:"leaderboard"})," script that we will see below."]}),"\n",(0,r.jsx)(t.h2,{id:"panel-setup",children:"Panel setup"}),"\n",(0,r.jsx)(t.p,{children:"For each panel we have an Image element that shows its background. Under the panel we are going to programmatically add clones of the Entry Template. Our panels are anchored to the center of the screen."}),"\n",(0,r.jsx)(t.h2,{id:"entry-template-setup",children:"Entry Template setup"}),"\n",(0,r.jsx)(t.p,{children:"This is what our template for each leaderboard row looks like in the hierarchy:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Entry Template",src:a(80960).A+"",width:"231",height:"119"})}),"\n",(0,r.jsx)(t.p,{children:"It has four child Text Elements for displaying the Position in the leaderboard, the name of the player, the player's score and a label that says 'PTS'."}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"Entry Template"})," itself is a Group Element:"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Entry Template Attributes",src:a(44933).A+"",width:"318",height:"485"})}),"\n",(0,r.jsx)(t.p,{children:"Notice how the Group Element has split horizontal anchors:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Split Anchors",src:a(2085).A+"",width:"320",height:"251"})}),"\n",(0,r.jsx)(t.p,{children:"The horizontal anchors are not equal (they are 0 and 1) which means that the Element will expand automatically to fill the entire horizontal area if the Screen is resized. We also have a horizontal margin of 50 pixels to allow a small gap from the edges - the margin can only be set when anchors are split."}),"\n",(0,r.jsx)(t.p,{children:"Now let's look at the rest of the Group's children."}),"\n",(0,r.jsx)(t.h3,{id:"position",children:"Position"}),"\n",(0,r.jsx)(t.p,{children:"Position is anchored to the left:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Position",src:a(97299).A+"",width:"320",height:"861"})}),"\n",(0,r.jsx)(t.h3,{id:"name",children:"Name"}),"\n",(0,r.jsx)(t.p,{children:"Name is anchored to the left and moved a bit to the right:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Name",src:a(42915).A+"",width:"322",height:"848"})}),"\n",(0,r.jsx)(t.h3,{id:"score",children:"Score"}),"\n",(0,r.jsx)(t.p,{children:"Score is anchored to the right"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Score",src:a(6958).A+"",width:"322",height:"852"})}),"\n",(0,r.jsx)(t.h3,{id:"points",children:"Points"}),"\n",(0,r.jsx)(t.p,{children:"Points are anchored to the right"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Pts",src:a(62911).A+"",width:"316",height:"854"})}),"\n",(0,r.jsx)(t.h2,{id:"script",children:"Script"}),"\n",(0,r.jsxs)(t.p,{children:["This is the ",(0,r.jsx)(t.code,{children:"leaderboard"})," script that reads our JSON asset and fills the leaderboard:"]}),"\n","\n",(0,r.jsxs)(l.A,{defaultValue:"classic",groupId:"script-code",children:[(0,r.jsx)(i.A,{value:"esm",label:"ESM",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'import { Script } from \'playcanvas\';\n\nexport class Leaderboard extends Script {\n    static scriptName = "leaderBoard";\n\n    /**\n     * @attribute\n     * @title Template\n     * @type {Entity}\n     */\n    template = null;\n\n    /**\n     * @attribute\n     * @title Personal\n     * @type {Entity}\n     */\n    personal = null;\n\n    /**\n     * @attribute\n     * @title Leaderboard\n     * @type {Entity}\n     */\n    leaderboard = null;\n\n    initialize() {\n        this.entries = [];\n\n        this.load((data) => {\n            this.clear();\n\n            // add the personal entry\n            let y = -75;\n            this.addEntry(this.personal, y, data.personal.position, data.personal.name, data.personal.score);\n\n            // add the top ten\n            y = -60;\n            for (let i = 0; i < Math.min(data.leaderboard.length, 10); i++) {\n                this.addEntry(this.leaderboard, y, i + 1, data.leaderboard[i].name, data.leaderboard[i].score);\n                y -= 99; // offset each entry\n            }\n        });\n    }\n\n    clear() {\n        this.entries.forEach(entry => entry.destroy());\n        this.entries = [];\n    }\n\n    addEntry(parent, y, position, name, score) {\n        const entry = this.template.clone();\n        entry.enabled = true;\n\n        entry.findByName("Position").element.text = position.toString();\n        entry.findByName("Name").element.text = name.toUpperCase();\n        entry.findByName("Score").element.text = score.toString();\n\n        this.entries.push(entry);\n\n        parent.addChild(entry);\n        entry.translateLocal(0, y, 0);\n    }\n\n    load(callback) {\n        const asset = this.app.assets.find("leaderboard-data.json");\n        asset.ready(() => {\n            callback(asset.resource);\n        });\n        this.app.assets.load(asset);\n    }\n}\n'})})}),(0,r.jsx)(i.A,{value:"classic",label:"Classic",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:'var Leaderboard = pc.createScript(\'leaderboard\');\n\n// the text entry template to clone\nLeaderboard.attributes.add("template", {type: "entity"});\n// the parent leaderboard for the personal score\nLeaderboard.attributes.add("personal", {type: "entity"});\n// the parent leaderboard for the top ten\nLeaderboard.attributes.add("leaderboard", {type: "entity"});\n\nLeaderboard.prototype.initialize = function() {\n    var self = this;\n\n    this.entries = [];\n\n    this.load(function (data) {\n        self.clear();\n\n        // add the personal entry\n        var y = -75;\n        self.addEntry(self.personal, y, data.personal.position, data.personal.name, data.personal.score);\n\n        // add the top ten\n        y = -60;\n        for (var i = 0; i < Math.min(data.leaderboard.length, 10); i++) {\n            self.addEntry(self.leaderboard, y, i+1, data.leaderboard[i].name, data.leaderboard[i].score);\n            y -= 99; // offset each entry\n        }\n    });\n};\n\n// clear all leaderboard entries\nLeaderboard.prototype.clear = function () {\n    for (var i = 0; i < this.entries.length; i++) {\n        this.entries[i].destroy();\n    }\n\n    this.entries = [];\n};\n\n// add a new entry into the leaderboard\nLeaderboard.prototype.addEntry = function (parent, y, position, name, score) {\n    var entry = this.template.clone();\n    entry.enabled = true;\n\n    entry.findByName("Position").element.text = position.toString();\n    entry.findByName("Name").element.text = name.toUpperCase();\n    entry.findByName("Score").element.text = score.toString();\n\n    this.entries.push(entry);\n\n    parent.addChild(entry);\n    entry.translateLocal(0, y, 0);\n};\n\n// Mock loading leaderboard data, for this demo we just get the data from a JSON file in the project\n// For your project you could download this from a server backend\nLeaderboard.prototype.load = function (callback) {\n    var asset = this.app.assets.find("leaderboard-data.json");\n    asset.ready(function () {\n        callback(asset.resource);\n    });\n    this.app.assets.load(asset);\n};\n'})})})]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},80960:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/template-fa8f92e893b24fc10c7ce0f66c12bb66.png"},97299:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/position-278a95d3277220ccbb1d70a8e32169c8.png"}}]);