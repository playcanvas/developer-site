"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[11768],{6842:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"tutorials/controlling-lights","title":"Controlling Lights","description":"Press 1, 2 or 3 to enable/disable the spot, point and directional lights respectively.","source":"@site/docs/tutorials/controlling-lights.md","sourceDirName":"tutorials","slug":"/tutorials/controlling-lights","permalink":"/tutorials/controlling-lights","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/controlling-lights.md","tags":[{"inline":true,"label":"lighting","permalink":"/tags/lighting"}],"version":"current","frontMatter":{"title":"Controlling Lights","tags":["lighting"],"thumb":"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405812/9D487A-image-75.jpg"},"sidebar":"tutorialsSidebar","previous":{"title":"Compound Physics Shapes","permalink":"/tutorials/compound-physics-shapes"},"next":{"title":"Crash Course - Make a Game","permalink":"/tutorials/crash-course"}}');var a=n(74848),s=n(28453),r=n(11470),o=n(19365);const l={title:"Controlling Lights",tags:["lighting"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405812/9D487A-image-75.jpg"},c=void 0,h={},d=[{value:"The lighting commands",id:"the-lighting-commands",level:2},{value:"General setup",id:"general-setup",level:2}];function p(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"iframe-container",children:(0,a.jsx)("iframe",{src:"https://playcanv.as/p/tiKpka9M/",title:"Controlling Lights",allow:"camera; microphone; xr-spatial-tracking; fullscreen",allowfullscreen:!0})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.em,{children:"Press 1, 2 or 3 to enable/disable the spot, point and directional lights respectively."})}),"\n",(0,a.jsxs)(t.p,{children:["In this tutorial we will show you how to enable/disable lights in PlayCanvas and to change light color and intensity. Note that there are many more controllable light features and properties, such as the light range. See the ",(0,a.jsx)(t.a,{href:"https://api.playcanvas.com/engine/classes/LightComponent.html",children:"API listing here"})," for more details."]}),"\n",(0,a.jsx)(t.p,{children:"It is also important to be aware of the different limits for differing light properties, for example red, green and blue values are set between 0 and 1, but intensity reaches from 0 up to 10. Also some lights have properties unique to them, such as the cone angles for the spot light."}),"\n",(0,a.jsx)(t.h2,{id:"the-lighting-commands",children:"The lighting commands"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"if (app.keyboard.wasPressed(pc.KEY_1)) {\n    this.spot.light.enabled = !this.spot.light.enabled;\n}\n"})}),"\n",(0,a.jsx)(t.p,{children:"This line toggles on and off the light component of the 'spot' entity."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"this.color1 = new pc.Color(1, 1, 1);\n"})}),"\n",(0,a.jsx)(t.p,{children:"A new color array is declared, the first three values affect red, green and blue values respectively."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"var s = Math.abs(Math.sin(1 + this.timer));\nvar r = 1-s/2;\nvar g = s-0.2;\nvar b = 0.55+s/2;\nthis.color1.set(r, g, b);\nthis.spot.light.color = this.color1;\nthis.spot.light.intensity = 10*s;\n"})}),"\n",(0,a.jsxs)(t.p,{children:["These lines assign values to r, g and b variables based on a sin wave and then assign these values to the previously declared color array via ",(0,a.jsx)(t.code,{children:"color1.set(x, y, z)"})," and then onto the light property. The intensity is set to vary sinusoidally from the max light intensity value of 10 down to 0."]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:["Using ",(0,a.jsx)(t.code,{children:"entity.light.color.r"})," to access and change the red value of a light's color will not work. Only changes to the light property ",(0,a.jsx)(t.code,{children:"color"})," are detected, so you must assign a complete ",(0,a.jsx)(t.code,{children:"pc.Color"})," to the property e.g. ",(0,a.jsx)(t.code,{children:"entity.light.color = new pc.Color(1, 1, 1);"}),"."]})}),"\n",(0,a.jsx)(t.h2,{id:"general-setup",children:"General setup"}),"\n",(0,a.jsxs)(t.p,{children:["We added a spot light (attached to a parent assembly of a basic torch model), an omni light attached to a parent sphere model, in addition to the default directional light that is created for every new Scene. The controlling script was attached to the root entity. The sphere and torch were made children of a blank entity residing in the centre of the scene to enable easy rotation. The ",(0,a.jsx)(t.a,{href:"https://playcanvas.com/project/405812/overview/tutorial-controlling-lights",children:"full Editor scene and scripts can be accessed here"})," in the 'controllingLights' Scene."]}),"\n",(0,a.jsx)(t.p,{children:"The full code used for the above PlayCanvas app is as follows."}),"\n","\n",(0,a.jsxs)(r.A,{defaultValue:"classic",groupId:"script-code",children:[(0,a.jsx)(o.A,{value:"esm",label:"ESM",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'import { Script, KEY_1, KEY_2, KEY_3, Color } from \'playcanvas\';\n\nexport class LightHandler extends Script {\n    static scriptName = "lightHandler";\n        \n    // initialize code called once per entity\n    initialize() {\n        const app = this.app;\n\n        this.spot = app.root.findByName("SpotLight");\n        this.point = app.root.findByName("PointLight");\n        this.directional = app.root.findByName("DirectionalLight");\n        this.pivot1 = app.root.findByName("Pivot1");\n        this.pivot2 = app.root.findByName("Pivot2");\n        this.timer = 0;\n        this.color1 = new Color(1, 1, 1);\n        this.color2 = new Color(1, 1, 1);\n        this.color3 = new Color(1, 1, 1);\n    };\n\n    // update code called every frame\n    update(dt) {\n        var app = this.app;\n\n        this.pivot();\n\n        if (app.keyboard.wasPressed(KEY_1)) {\n            this.spot.light.enabled = !this.spot.light.enabled;\n        }\n        if (app.keyboard.wasPressed(KEY_2)) {\n            this.point.light.enabled = !this.point.light.enabled;\n        }\n        if (app.keyboard.wasPressed(KEY_3)) {\n            this.directional.light.enabled = !this.directional.light.enabled;\n        }\n\n        // a counter that is used as input to sin the functions determining light properties for all lights.\n        this.timer += dt;\n\n        // these 3 code blocks assign color and intensity values that vary according to a sin function\n        // all sin inputs are in radians\n        var s = Math.abs(Math.sin(1 + this.timer));\n        var r = 1-s/2;\n        var g = s-0.2;\n        var b = 0.55+s/2;\n        this.color1.set(r, g, b);\n        this.spot.light.color = this.color1;\n        this.spot.light.intensity = 10*s;\n\n        s = Math.abs(Math.sin(2 + this.timer));\n        r = s/2;\n        g = 0.25+s/2;\n        b = 1.0-s;\n        this.color2.set(r, g, b);\n        this.point.light.color = this.color2;\n        this.point.light.intensity = 10*s;\n\n        s = Math.abs(Math.sin(3 + this.timer));\n        r = 0.25+s/2;\n        g = 0.75-s/2;\n        b = 0.25+s/2;\n        this.color3.set(r, g, b);\n        this.directional.light.color = this.color3;\n        this.directional.light.intensity = 3*(1-s);\n    }\n\n    // this function rotates all three lights about their parent entities (all at the centre of the scene) to easily create circular motion.\n    pivot() {\n        this.pivot1.rotate(0, 2, 0);\n        this.pivot2.rotate(0, -3, 0);\n    }\n}\n'})})}),(0,a.jsx)(o.A,{value:"classic",label:"Classic",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'var LightHandler = pc.createScript(\'lightHandler\');\n\n// initialize code called once per entity\nLightHandler.prototype.initialize = function() {\n    var app = this.app;\n\n    this.spot = app.root.findByName("SpotLight");\n    this.point = app.root.findByName("PointLight");\n    this.directional = app.root.findByName("DirectionalLight");\n    this.pivot1 = app.root.findByName("Pivot1");\n    this.pivot2 = app.root.findByName("Pivot2");\n    this.timer = 0;\n    this.color1 = new pc.Color(1, 1, 1);\n    this.color2 = new pc.Color(1, 1, 1);\n    this.color3 = new pc.Color(1, 1, 1);\n};\n\n// update code called every frame\nLightHandler.prototype.update = function(dt) {\n    var app = this.app;\n\n    this.pivot();\n\n    if (app.keyboard.wasPressed(pc.KEY_1)) {\n        this.spot.light.enabled = !this.spot.light.enabled;\n    }\n    if (app.keyboard.wasPressed(pc.KEY_2)) {\n        this.point.light.enabled = !this.point.light.enabled;\n    }\n    if (app.keyboard.wasPressed(pc.KEY_3)) {\n        this.directional.light.enabled = !this.directional.light.enabled;\n    }\n\n    // a counter that is used as input to sin the functions determining light properties for all lights.\n    this.timer += dt;\n\n    // these 3 code blocks assign color and intensity values that vary according to a sin function\n    // all sin inputs are in radians\n    var s = Math.abs(Math.sin(1 + this.timer));\n    var r = 1-s/2;\n    var g = s-0.2;\n    var b = 0.55+s/2;\n    this.color1.set(r, g, b);\n    this.spot.light.color = this.color1;\n    this.spot.light.intensity = 10*s;\n\n    s = Math.abs(Math.sin(2 + this.timer));\n    r = s/2;\n    g = 0.25+s/2;\n    b = 1.0-s;\n    this.color2.set(r, g, b);\n    this.point.light.color = this.color2;\n    this.point.light.intensity = 10*s;\n\n    s = Math.abs(Math.sin(3 + this.timer));\n    r = 0.25+s/2;\n    g = 0.75-s/2;\n    b = 0.25+s/2;\n    this.color3.set(r, g, b);\n    this.directional.light.color = this.color3;\n    this.directional.light.intensity = 3*(1-s);\n};\n\n// this function rotates all three lights about their parent entities (all at the centre of the scene) to easily create circular motion.\nLightHandler.prototype.pivot = function () {\n    this.pivot1.rotate(0, 2, 0);\n    this.pivot2.rotate(0, -3, 0);\n};\n'})})})]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},11470:(e,t,n)=>{n.d(t,{A:()=>j});var i=n(96540),a=n(34164),s=n(23104),r=n(56347),o=n(205),l=n(57485),c=n(31682),h=n(70679);function d(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,i.useMemo)(()=>{const e=t??function(e){return d(e).map(({props:{value:e,label:t,attributes:n,default:i}})=>({value:e,label:t,attributes:n,default:i}))}(n);return function(e){const t=(0,c.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function u({value:e,tabValues:t}){return t.some(t=>t.value===e)}function g({queryString:e=!1,groupId:t}){const n=(0,r.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(a),(0,i.useCallback)(e=>{if(!a)return;const t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})},[a,n])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,s=p(e),[r,l]=(0,i.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!u({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s})),[c,d]=g({queryString:n,groupId:a}),[m,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,a]=(0,h.Dv)(t);return[n,(0,i.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:a}),b=(()=>{const e=c??m;return u({value:e,tabValues:s})?e:null})();(0,o.A)(()=>{b&&l(b)},[b]);return{selectedValue:r,selectValue:(0,i.useCallback)(e=>{if(!u({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)},[d,f,s]),tabValues:s}}var f=n(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=n(74848);function y({className:e,block:t,selectedValue:n,selectValue:i,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),c=e=>{const t=e.currentTarget,a=o.indexOf(t),s=r[a].value;s!==n&&(l(t),i(s))},h=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:r.map(({value:e,label:t,attributes:i})=>(0,v.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{o.push(e)},onKeyDown:h,onClick:c,...i,className:(0,a.A)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function x({lazy:e,children:t,selectedValue:n}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===n);return e?(0,i.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function w(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,v.jsx)(y,{...t,...e}),(0,v.jsx)(x,{...t,...e})]})}function j(e){const t=(0,f.A)();return(0,v.jsx)(w,{...e,children:d(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>r});n(96540);var i=n(34164);const a={tabItem:"tabItem_Ymn6"};var s=n(74848);function r({children:e,hidden:t,className:n}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.A)(a.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(96540);const a={},s=i.createContext(a);function r(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);