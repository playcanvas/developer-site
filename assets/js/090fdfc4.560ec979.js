"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[69579],{2996:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"user-manual/editor/scripting/loading-order","title":"Script Loading Order","description":"ESM Scripts","source":"@site/docs/user-manual/editor/scripting/loading-order.md","sourceDirName":"user-manual/editor/scripting","slug":"/user-manual/editor/scripting/loading-order","permalink":"/user-manual/editor/scripting/loading-order","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/editor/scripting/loading-order.md","tags":[],"version":"current","frontMatter":{"title":"Script Loading Order"},"sidebar":"userManualSidebar","previous":{"title":"Hot Reloading","permalink":"/user-manual/editor/scripting/hot-reloading"},"next":{"title":"Templates","permalink":"/user-manual/editor/templates/"}}');var n=i(74848),s=i(28453);const a={title:"Script Loading Order"},o=void 0,d={},c=[{value:"ESM Scripts",id:"esm-scripts",level:2},{value:"Classic Scripts",id:"classic-scripts",level:2},{value:"Preloading",id:"preloading",level:3},{value:"Concatenation",id:"concatenation",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"esm-scripts",children:"ESM Scripts"}),"\n",(0,n.jsx)(t.p,{children:"ESM Scripts do not have an explicit loading order, and should not be relied upon to load in a specific order. Instead, you should use module import statements to declare dependencies between modules."}),"\n",(0,n.jsx)(t.h2,{id:"classic-scripts",children:"Classic Scripts"}),"\n",(0,n.jsx)(t.p,{children:"Generally all scripts are loaded at the beginning of your application. The loading order is determined by a setting in your project which you can access from the main Editor menu or Scene Settings:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Loading Order",src:i(17487).A+"",width:"232",height:"336"})}),"\n",(0,n.jsxs)(t.p,{children:["The loading order panel shows all Classic scripts marked as ",(0,n.jsx)(t.code,{children:"preload"})," and the order that they are loaded and executed in."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Loading Order List",src:i(79966).A+"",width:"314",height:"764"})}),"\n",(0,n.jsx)(t.p,{children:"You can click-and-drag to move individual scripts around to edit the order."}),"\n",(0,n.jsxs)(t.p,{children:["When scripts are first loaded, they are immediately executed. That means that the scripts are first executed in the order that they are loaded. However, the loading order of the script ",(0,n.jsx)(t.strong,{children:"does not"})," affect the execution of order of script methods within script component. For example, the ",(0,n.jsx)(t.code,{children:"initialize"})," methods of scripts on the same entity are called in the order that they are listed on the Entity, not the loading order."]}),"\n",(0,n.jsx)(t.h3,{id:"preloading",children:"Preloading"}),"\n",(0,n.jsxs)(t.p,{children:["By default, as with other assets in PlayCanvas, a script asset is marked as ",(0,n.jsx)(t.code,{children:"preload"}),". This means that it will be loaded before the application starts. If you disable preloading on a script, it will not be loaded under normal circumstances. This way, you can include a script in your project but prevent it from loading by unchecking ",(0,n.jsx)(t.code,{children:"preload"}),". You can trigger a non-preloading script to load dynamically by using the regular asset API (see ",(0,n.jsx)(t.a,{href:"https://api.playcanvas.com/engine/classes/AssetRegistry.html#load",children:(0,n.jsx)(t.code,{children:"AssetRegistry#load"})}),")."]}),"\n",(0,n.jsx)(t.p,{children:"It is possible to subscribe to dynamic changes to script registry:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-javascript",children:"this.app.scripts.on('add', (name, scriptType) => {\n    console.log('script', name, 'has been loaded');\n});\n"})}),"\n",(0,n.jsx)(t.h3,{id:"concatenation",children:"Concatenation"}),"\n",(0,n.jsx)(t.p,{children:"By default, when you publish or export your application, all preloaded Classic scripts are concatenated into a single script file. This optimizes load time by reducing the number of requests that are needed to load all your scripts."})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},17487:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/script-loading-order-8162faaf133a69552706b2d24030e801.jpg"},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>o});var r=i(96540);const n={},s=r.createContext(n);function a(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(s.Provider,{value:t},e.children)}},79966:(e,t,i)=>{i.d(t,{A:()=>r});const r=i.p+"assets/images/loading-order-list-2ae562171d86dc44316188bcc36857a0.jpg"}}]);