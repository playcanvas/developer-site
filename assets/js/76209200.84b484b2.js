"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[58627],{7184:(e,s,t)=>{t.d(s,{C:()=>D,G:()=>C});var n=t(11470),a=t(19365),r=t(59849),i=t(96540),o=t(95293),c=t(9764),l=t(18676),d=t(58817),p=t(19748),h=t(83395),u=t(43025),m=t(10977),x=t(7306),y=t(68869),v=t(78692),f=t(8939),j=t(40050),g=t(93953),S=t(27351),w=t(74848);const b="// \u2191 imports hidden",C=({code:e,label:s,filename:t,language:o="jsx",showDemo:l=!1,showViewSourceButton:d=!0,showControls:p=!0,children:h})=>{const[u,m]=(0,i.useState)(0);if(!h||!e)return console.error("CodeExample: code and children are required"),null;return(0,w.jsxs)(n.A,{defaultValue:u>0?"Code":l?"Demo":"Code",children:[(0,w.jsx)(a.A,{value:"Demo",children:(0,w.jsxs)("div",{className:"code-example-demo",children:[h,d&&(0,w.jsxs)("div",{className:"code-example-demo-footer",children:[s," - ",(0,w.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),m(e=>e+1)},children:"View Code"})]}),(0,w.jsx)("div",{className:"code-example-controls",children:(0,w.jsx)(c.XA,{fill:!0,hidden:!1===p})})]})}),(0,w.jsx)(a.A,{value:"Code",children:(0,w.jsx)(r.A,{language:o,title:t,children:e.includes(b)?b+e.split(b)[1]:e})})]},u)},k=e=>{const{width:s=8,depth:t=8,intensity:n=.75}=e,a=(0,i.useMemo)(()=>new g.e(s,1,t),[s,t]);return(0,w.jsxs)(l.w,{children:[(0,w.jsx)(p.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:S.au1,shadowUpdateMode:S.M5l,vsmBlurSize:8,shadowIntensity:n,intensity:0}),(0,w.jsx)(h.e,{script:f.X,intensity:n,scale:a})]})},D=({children:e,useLight:s=!0,useControls:t=!1,useGrid:n=!1,useShadow:a=!1,camera:r=[0,0,10],sceneOffset:c=[0,-.501,0],exposure:p=1})=>{const{colorMode:f}=(0,o.G)(),g=(0,m.n)(),{asset:S}=(0,x.yj)("/assets/helipad.png"),b="dark"===f?"#2a2a2a":"#e4e0e0",[C,D]=(0,i.useState)(!1),[M,E]=(0,i.useState)(!1),A=(0,i.useCallback)(()=>D(!0),[]),R=(0,i.useCallback)(()=>D(!1),[]),P=(0,i.useCallback)(()=>E(!0),[]),T=(0,i.useCallback)(()=>E(!1),[]);return(0,i.useEffect)(()=>{const e=g.graphicsDevice.canvas;e.style.cursor=C?"grabbing":M?"grab":"default"},[C,M,g]),(0,i.useEffect)(()=>{const e=()=>D(!1);return g.graphicsDevice.canvas.addEventListener("pointerup",e),()=>g.graphicsDevice?.canvas.removeEventListener("pointerup",e)},[g]),(0,w.jsxs)(l.w,{children:[(0,w.jsxs)(l.w,{name:"camera",position:r,children:[(0,w.jsx)(d.i,{clearColor:b,renderSceneColorMap:!0}),t&&(0,w.jsx)(h.e,{script:y.a,enableFly:!1,pitchRange:new j.Z(-90,-5)})]}),s&&(0,w.jsx)(u.O,{envAtlas:S,showSkybox:!1,exposure:p}),n&&(0,w.jsx)(l.w,{name:"grid",scale:[1e3,1,1e3],position:[0,-.5,0],children:(0,w.jsx)(h.e,{script:v.x})}),a&&(0,w.jsx)(l.w,{position:c,children:(0,w.jsx)(k,{})}),(0,w.jsx)(l.w,{onPointerOver:P,onPointerOut:T,onPointerDown:A,onPointerUp:R,children:e})]})}},24421:(e,s,t)=>{t.d(s,{A:()=>p});var n=t(18676),a=t(19748),r=t(83395),i=t(93953),o=t(27351),c=t(8939),l=t(96540),d=t(74848);const p=e=>{const{width:s=2,depth:t=2,intensity:p=.75}=e,h=(0,l.useMemo)(()=>new i.e(s,1,t),[s,t]);return(0,d.jsxs)(n.w,{position:[0,.001,0],children:[(0,d.jsx)(a.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:o.au1,shadowUpdateMode:o.M5l,vsmBlurSize:8,shadowIntensity:p,intensity:0}),(0,d.jsx)(r.e,{script:c.X,intensity:p,scale:h})]})}},49801:(e,s,t)=>{t.d(s,{A:()=>o});var n=t(18676),a=t(83395),r=t(78692),i=t(74848);const o=({...e})=>(0,i.jsx)(n.w,{scale:[1e3,1,1e3],children:(0,i.jsx)(a.e,{script:r.x,...e})})},53558:(e,s,t)=>{t.d(s,{A:()=>f});var n=t(96540),a=t(68869),r=t(8939),i=t(78692),o=t(14007),c=t(25303),l=t(34363),d=t(53512),p=t(49801),h=t(24421),u=t(85593),m=t(83395),x=t(83171),y=t(74848);const v=e=>(0,y.jsx)(m.e,{script:x.d,...e}),f={React:n,...n,...o,...c,...l,...d,Grid:p.A,ShadowCatcher:h.A,GridScript:i.x,ShadowCatcherScript:r.X,StaticPostEffects:u.A,AutoRotate:v,CameraControls:a.a}},85593:(e,s,t)=>{t.d(s,{A:()=>i});var n=t(83395),a=t(15817),r=t(74848);const i=e=>{const s={lighting:{exposure:1.21,skyBoxIntensity:1.02},rendering:{renderFormat:18,renderTargetScale:1,sharpness:0,samples:4,toneMapping:4,fog:"none",fogColor:{r:0,g:0,b:0,a:1},fogRange:[0,100],fogDensity:.01,renderFormatFallback0:12,renderFormatFallback1:14,sceneColorMap:!1,sceneDepthMap:!1,fogStart:0,fogEnd:100},bloom:{enabled:!0,intensity:.1,lastMipLevel:1},grading:{enabled:!0,brightness:.83,contrast:1.1,saturation:1.2,tint:{r:1,g:.9333333333333333,b:.8666666666666667,a:1}},vignette:{enabled:!0,intensity:1,inner:.25,outer:1.52,curvature:.78},fringing:{enabled:!0,intensity:10},...e};return(0,r.jsx)(n.e,{script:a.P,...s})}},89755:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>j,contentTitle:()=>f,default:()=>w,frontMatter:()=>v,metadata:()=>n,toc:()=>g});const n=JSON.parse('{"id":"user-manual/playcanvas-react/api/script","title":"<Script/>","description":"Documentation for the Script component","source":"@site/docs/user-manual/playcanvas-react/api/script.mdx","sourceDirName":"user-manual/playcanvas-react/api","slug":"/user-manual/playcanvas-react/api/script","permalink":"/user-manual/playcanvas-react/api/script","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/playcanvas-react/api/script.mdx","tags":[],"version":"current","frontMatter":{"description":"Documentation for the Script component"},"sidebar":"userManualSidebar","previous":{"title":"<Rigidbody/>","permalink":"/user-manual/playcanvas-react/api/rigidbody"},"next":{"title":"Hooks","permalink":"/user-manual/playcanvas-react/api/hooks/"}}');var a=t(74848),r=t(28453),i=t(7184),o=t(78264),c=t(18676),l=t(16230),d=t(83395),p=t(85169),h=t(9764);const u={speed:{value:10,min:0,max:100,step:1}};class m extends p.e{update(e){this.entity.rotate(0,e*this.speed,0)}}const x=()=>{const{speed:e}=(0,h._5)(u);return(0,a.jsxs)(c.w,{children:[(0,a.jsx)(l.d,{type:"box",castShadows:!0,receiveShadows:!0}),(0,a.jsx)(d.e,{script:m,speed:e})]})},y="import { Entity } from '@playcanvas/react';\nimport { Script, Render } from '@playcanvas/react/components';\nimport { Script as PcScript } from 'playcanvas';\nimport { useControls } from 'leva';\n\n\nconst vars = {\n  speed: { value: 10, min: 0, max: 100, step: 1 }\n};\n// \u2191 imports hidden\n\n// This class runs in the scope of the entity it's attached to\nclass SpinMe extends PcScript {\n  update(dt) {\n    this.entity.rotate(0, dt * this.speed, 0);\n  }\n}\n\nexport const ScriptExample = () => {\n  const { speed } = useControls(vars);\n\n  return (\n    <Entity>\n      <Render type=\"box\" castShadows receiveShadows />\n      <Script script={SpinMe} speed={speed} />\n    </Entity>\n  );\n};\n\n",v={description:"Documentation for the Script component"},f="<Script/>",j={},g=[{value:"Usage",id:"usage",level:2},{value:"Properties",id:"properties",level:2}];function S(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components},{RenderApiDocs:t}=s;return t||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("RenderApiDocs",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"script",children:(0,a.jsx)(s.code,{children:"<Script/>"})})}),"\n","\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"<Script/>"})," component provides a simple imperative way to add behaviors to an ",(0,a.jsx)(s.a,{href:"../entity",children:(0,a.jsx)(s.code,{children:"<Entity/>"})}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["This is useful for things like ",(0,a.jsx)(s.a,{href:"../../guide/physics",children:"physics"}),", animation, and ",(0,a.jsx)(s.a,{href:"../../guide/interactivity",children:"interactivity"})," where, for performance reasons, you want to bypass updating React props. It allows you to hook into the engine's update loop outside of React, which is useful for performance-critical code. You can also leverage existing Scripts from PlayCanvas Editor Projects."]}),"\n",(0,a.jsxs)(s.p,{children:["You can find more information about ",(0,a.jsx)(s.a,{href:"/user-manual/scripting/",children:"Scripts"})," in the Engine documentation."]}),"\n",(0,a.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"Script"})," component takes a class that extends the PlayCanvas ",(0,a.jsx)(s.a,{href:"https://api.playcanvas.com/engine/classes/Script.html",children:"Script"})," class and attaches it to the ",(0,a.jsx)(s.code,{children:"Entity"}),". Any additional props are passed to the Script class directly and can be used as properties on the class."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-tsx",children:"import { Script } from '@playcanvas/react/components'\nimport { CameraControls } from 'playcanvas/scripts/esm/camera-controls.mjs'\n\nreturn <Script script={CameraControls} />\n"})}),"\n",(0,a.jsxs)(s.p,{children:["The following examples adds a ",(0,a.jsx)(s.code,{children:"SpinMe"})," script to the entity that rotates the entity every frame."]}),"\n",(0,a.jsx)(i.G,{label:"Script component with rotation behavior",code:y,showDemo:!0,children:(0,a.jsx)(o.l,{children:(0,a.jsx)(i.C,{useLight:!0,useShadow:!0,useGrid:!0,camera:[3,3,3],useControls:!0,children:(0,a.jsx)(x,{})})})}),"\n",(0,a.jsxs)(s.p,{children:["You can use any existing Script or create your own, or any from the engine repository for ",(0,a.jsx)(s.a,{href:"https://github.com/playcanvas/engine/tree/main/scripts/esm",children:"existing Scripts"}),"."]}),"\n",(0,a.jsx)(s.admonition,{type:"tip",children:(0,a.jsxs)(s.p,{children:["The PlayCanvas engine contains a number of useful scripts that you can use in your projects. ",(0,a.jsxs)(s.strong,{children:["Find them ",(0,a.jsx)(s.a,{href:"https://github.com/playcanvas/engine/tree/main/scripts/esm",children:"here"})]}),"."]})}),"\n",(0,a.jsxs)(s.p,{children:["You can learn more about the anatomy of a ESM Script in the ",(0,a.jsx)(s.a,{href:"/user-manual/scripting/fundamentals/esm-scripts",children:"Scripting documentation"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsx)(t,{data:'[{"name":"default","description":"","entries":[{"name":"script","description":"The Script class to attach to the entity","optional":false,"type":{"displayName":"SubclassOf<Script>","types":[{"name":"__type","url":null}]}}]}]'})]})}function w(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(S,{...e})}):S(e)}}}]);