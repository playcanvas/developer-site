"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[66111],{11470:(e,t,n)=>{n.d(t,{A:()=>w});var a=n(96540),i=n(34164),s=n(23104),r=n(56347),o=n(205),l=n(57485),c=n(31682),u=n(70679);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return d(e).map((({props:{value:e,label:t,attributes:n,default:a}})=>({value:e,label:t,attributes:n,default:a})))}(n);return function(e){const t=(0,c.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m({value:e,tabValues:t}){return t.some((t=>t.value===e))}function p({queryString:e=!1,groupId:t}){const n=(0,r.W6)(),i=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(i),(0,a.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(n.location.search);t.set(i,e),n.replace({...n.location,search:t.toString()})}),[i,n])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,s=h(e),[r,l]=(0,a.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s}))),[c,d]=p({queryString:n,groupId:i}),[f,v]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,i]=(0,u.Dv)(t);return[n,(0,a.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:i}),b=(()=>{const e=c??f;return m({value:e,tabValues:s})?e:null})();(0,o.A)((()=>{b&&l(b)}),[b]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),v(e)}),[d,v,s]),tabValues:s}}var v=n(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(74848);function y({className:e,block:t,selectedValue:n,selectValue:a,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),c=e=>{const t=e.currentTarget,i=o.indexOf(t),s=r[i].value;s!==n&&(l(t),a(s))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:r.map((({value:e,label:t,attributes:a})=>(0,g.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{o.push(e)},onKeyDown:u,onClick:c,...a,className:(0,i.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":n===e}),children:t??e},e)))})}function x({lazy:e,children:t,selectedValue:n}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find((e=>e.props.value===n));return e?(0,a.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==n})))})}function j(e){const t=f(e);return(0,g.jsxs)("div",{className:(0,i.A)("tabs-container",b.tabList),children:[(0,g.jsx)(y,{...t,...e}),(0,g.jsx)(x,{...t,...e})]})}function w(e){const t=(0,v.A)();return(0,g.jsx)(j,{...e,children:d(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>r});n(96540);var a=n(34164);const i={tabItem:"tabItem_Ymn6"};var s=n(74848);function r({children:e,hidden:t,className:n}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var a=n(96540);const i={},s=a.createContext(i);function r(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:t},e.children)}},33460:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/animation_asset_with_events-f4b09e5b11d9bfb09175355559184206.png"},65932:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"user-manual/animation/anim-events","title":"Anim Events","description":"Anim events can be used to trigger event listeners during the playback of an animation. Each event is associated with a specified frame of the animation asset it is attached to. When the playback of the animation reaches that frame, the event will fire and the associated event listener is called.","source":"@site/docs/user-manual/animation/anim-events.md","sourceDirName":"user-manual/animation","slug":"/user-manual/animation/anim-events","permalink":"/user-manual/animation/anim-events","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/animation/anim-events.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Anim Events","sidebar_position":5},"sidebar":"userManualSidebar","previous":{"title":"Anim Layer Masks","permalink":"/user-manual/animation/anim-layer-masking"},"next":{"title":"Physics","permalink":"/user-manual/physics/"}}');var i=n(74848),s=n(28453),r=n(11470),o=n(19365);const l={title:"Anim Events",sidebar_position:5},c=void 0,u={},d=[{value:"Creating Events",id:"creating-events",level:3},{value:"Event Listeners",id:"event-listeners",level:3}];function h(e){const t={code:"code",h3:"h3",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Anim events can be used to trigger event listeners during the playback of an animation. Each event is associated with a specified frame of the animation asset it is attached to. When the playback of the animation reaches that frame, the event will fire and the associated event listener is called."}),"\n",(0,i.jsx)(t.h3,{id:"creating-events",children:"Creating Events"}),"\n",(0,i.jsxs)(t.p,{children:["To create a new event, select the animation asset in the asset panel which you'd like to create an event for. You should then see the ",(0,i.jsx)(t.code,{children:"+ EVENT"})," button in the asset inspector as shown below:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Animation Asset With Event",src:n(33460).A+"",width:"676",height:"1588"})}),"\n",(0,i.jsx)(t.p,{children:"Each event has the following modifiable properties:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Variable"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"time"}),(0,i.jsx)(t.td,{children:"Defines the specific time during the playback of the animation when the event should trigger. Given in seconds."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"name"}),(0,i.jsx)(t.td,{children:"The name of the event is used to identify the event when attaching an event listener to the anim component."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"An additional property which can be set to any number. Used to pass additional details to the event listener."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"string"}),(0,i.jsx)(t.td,{children:"An additional property which can be set to any string. Used to pass additional details to the event listener."})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"event-listeners",children:"Event Listeners"}),"\n",(0,i.jsx)(t.p,{children:"After creating an event for an animation asset, the event will be fired whenever that asset is played back by an anim component. You can therefore attach listeners to the anim component to handle the event. The following example shows how to attach event listeners to the anim component:"}),"\n","\n",(0,i.jsxs)(r.A,{defaultValue:"classic",groupId:"script-code",children:[(0,i.jsx)(o.A,{value:"esm",label:"ESM",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"import { Script } from 'playcanvas';\n\n// initialize code called once per entity\nexport class AnimationEvents extends Script {\n    static scriptName = \"animationEvents\";\n\n    initialize() {\n        this.entity.anim.on('plant_foot', (event) => {\n            // get the foot bone from the event's string property, either right_foot or left_foot\n            const footBone = this.entity.findByName(event.string);\n            createDustCloudAtLocation(footBone.getPosition());\n        });\n    }\n}\n"})})}),(0,i.jsx)(o.A,{value:"classic",label:"Classic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"var AnimationEvents = pc.createScript('animationEvents');\n\n// initialize code called once per entity\nAnimationEvents.prototype.initialize = function() {\n    this.entity.anim.on('plant_foot', function (event) {\n        // get the foot bone from the event's string property, either right_foot or left_foot\n        const footBone = this.entity.findByName(event.string);\n        createDustCloudAtLocation(footBone.getPosition());\n    }, this);\n};\n"})})})]}),"\n",(0,i.jsxs)(t.p,{children:["Any number of animation events can be attached to a single animation asset and used by any number of anim components. Making use of the additional ",(0,i.jsx)(t.code,{children:"number"})," and ",(0,i.jsx)(t.code,{children:"string"})," properties of an event allows you to differentiate between events that are passed to the same event listener."]})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);