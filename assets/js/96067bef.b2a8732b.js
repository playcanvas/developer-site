"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[89442],{11470:(e,t,a)=>{a.d(t,{A:()=>j});var n=a(96540),r=a(34164),s=a(23104),l=a(56347),i=a(205),o=a(57485),u=a(31682),c=a(70679);function d(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function f(e){const{values:t,children:a}=e;return(0,n.useMemo)(()=>{const e=t??function(e){return d(e).map(({props:{value:e,label:t,attributes:a,default:n}})=>({value:e,label:t,attributes:a,default:n}))}(a);return function(e){const t=(0,u.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,a])}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}function m({queryString:e=!1,groupId:t}){const a=(0,l.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,o.aZ)(r),(0,n.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})},[r,a])]}function h(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,s=f(e),[l,o]=(0,n.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find(e=>e.default)??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s})),[u,d]=m({queryString:a,groupId:r}),[h,v]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,r]=(0,c.Dv)(t);return[a,(0,n.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),b=(()=>{const e=u??h;return p({value:e,tabValues:s})?e:null})();(0,i.A)(()=>{b&&o(b)},[b]);return{selectedValue:l,selectValue:(0,n.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),v(e)},[d,v,s]),tabValues:s}}var v=a(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(74848);function g({className:e,block:t,selectedValue:a,selectValue:n,tabValues:l}){const i=[],{blockElementScrollPositionUntilNextRender:o}=(0,s.a_)(),u=e=>{const t=e.currentTarget,r=i.indexOf(t),s=l[r].value;s!==a&&(o(t),n(s))},c=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=i.indexOf(e.currentTarget)+1;t=i[a]??i[0];break}case"ArrowLeft":{const a=i.indexOf(e.currentTarget)-1;t=i[a]??i[i.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:l.map(({value:e,label:t,attributes:n})=>(0,x.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{i.push(e)},onKeyDown:c,onClick:u,...n,className:(0,r.A)("tabs__item",b.tabItem,n?.className,{"tabs__item--active":a===e}),children:t??e},e))})}function y({lazy:e,children:t,selectedValue:a}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===a);return e?(0,n.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a}))})}function w(e){const t=h(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,x.jsx)(g,{...t,...e}),(0,x.jsx)(y,{...t,...e})]})}function j(e){const t=(0,v.A)();return(0,x.jsx)(w,{...e,children:d(e.children)},String(t))}},19365:(e,t,a)=>{a.d(t,{A:()=>l});a(96540);var n=a(34164);const r={tabItem:"tabItem_Ymn6"};var s=a(74848);function l({children:e,hidden:t,className:a}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(r.tabItem,a),hidden:t,children:e})}},28453:(e,t,a)=>{a.d(t,{R:()=>l,x:()=>i});var n=a(96540);const r={},s=n.createContext(r);function l(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(s.Provider,{value:t},e.children)}},82614:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"tutorials/animated-textures","title":"Animated Textures","description":"See the full project.","source":"@site/docs/tutorials/animated-textures.md","sourceDirName":"tutorials","slug":"/tutorials/animated-textures","permalink":"/tutorials/animated-textures","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/animated-textures.md","tags":[{"inline":true,"label":"animation","permalink":"/tags/animation"},{"inline":true,"label":"textures","permalink":"/tags/textures"}],"version":"current","frontMatter":{"title":"Animated Textures","tags":["animation","textures"],"thumb":"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405882/831708-image-75.jpg"},"sidebar":"tutorialsSidebar","previous":{"title":"Animate entities with curves","permalink":"/tutorials/animate-entities-with-curves"},"next":{"title":"Animation Blending","permalink":"/tutorials/animation-blending"}}');var r=a(74848),s=a(28453),l=a(11470),i=a(19365);const o={title:"Animated Textures",tags:["animation","textures"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405882/831708-image-75.jpg"},u=void 0,c={},d=[{value:"Scrolling a material with map offset",id:"scrolling-a-material-with-map-offset",level:2}];function f(e){const t={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"iframe-container",children:(0,r.jsx)("iframe",{src:"https://playcanv.as/p/BM93v05L/",title:"Animated Textures",allow:"camera; microphone; xr-spatial-tracking; fullscreen",allowfullscreen:!0})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsxs)(t.em,{children:["See the ",(0,r.jsx)(t.a,{href:"https://playcanvas.com/project/405882",children:"full project"}),"."]})}),"\n",(0,r.jsx)(t.p,{children:"It can be very useful to animate a material that has been applied to a surface. The example shown here is scrolling a texture to simulate some movement."}),"\n",(0,r.jsx)(t.h2,{id:"scrolling-a-material-with-map-offset",children:"Scrolling a material with map offset"}),"\n",(0,r.jsxs)(t.p,{children:["The square plane in the example uses the script ",(0,r.jsx)(t.code,{children:"scrolling-texture.js"})," to constantly move the UV offset every frame. For example, this can be used to simulate flowing water. The update loop is displayed below."]}),"\n",(0,r.jsxs)(l.A,{defaultValue:"classic",groupId:"script-code",children:[(0,r.jsx)(i.A,{value:"classic",label:"Classic",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"ScrollingTexture.prototype.update = function(dt) {\n    var velocity = ScrollingTexture.tmpVec2;\n    var offset = ScrollingTexture.tmpOffset;\n\n    // Calculate how much to offset the texture\n    // Speed * dt\n    velocity.set(this.speed.x, this.speed.y);\n    velocity.scale(dt);\n\n    // Update the diffuse and normal map offset values\n    offset.copy(this.material.diffuseMapOffset);\n    offset.add(velocity);\n\n    this.material.diffuseMapOffset = offset;\n    this.material.normalMapOffset = offset;\n    this.material.update();\n};\n"})})}),(0,r.jsx)(i.A,{value:"esm",label:"ESM",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"update(dt) {\n    const velocity = ScrollingTexture.tmpVec2;\n    const offset = ScrollingTexture.tmpOffset;\n\n    // Calculate how much to offset the texture\n    // Speed * dt\n    velocity.set(this.speed.x, this.speed.y);\n    velocity.scale(dt);\n\n    // Update the diffuse and normal map offset values\n    offset.copy(this.material.diffuseMapOffset);\n    offset.add(velocity);\n\n    this.material.diffuseMapOffset = offset;\n    this.material.normalMapOffset = offset;\n    this.material.update();\n};\n"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["We calculate the required offset into a temporary vector ",(0,r.jsx)(t.code,{children:"tmp"}),". This is simply: ",(0,r.jsx)(t.code,{children:"speed * timeStep"}),". Then we add this offset to the offset property for both the diffuse map and the normal map by modifying the ",(0,r.jsx)(t.code,{children:"diffuseMapOffset"})," and ",(0,r.jsx)(t.code,{children:"normalMapOffset"})," properties. These values are ",(0,r.jsx)(t.code,{children:"pc.Vec2"}),"s which shift the UV co-ordinates used to map the texture to the surface. If you are using other maps (e.g. emissive) you will also need to update these offset properties as well. Finally we call ",(0,r.jsx)(t.code,{children:"material.update()"})," to propagate the changes into the shader."]}),"\n",(0,r.jsx)(t.p,{children:"This is a simple straightforward method to modify a material's offset and scroll a texture. It does have one downside which is this code modifies the actual material's properties. So if you have multiple models in a scene with the same material, they will all be affected."})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}}}]);