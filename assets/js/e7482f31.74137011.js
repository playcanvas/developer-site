"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[39507],{11470:(e,t,n)=>{n.d(t,{A:()=>E});var i=n(96540),a=n(34164),r=n(17559),o=n(23104),s=n(56347),l=n(205),c=n(57485),d=n(31682),u=n(70679);function h(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:t,children:n}=e;return(0,i.useMemo)(()=>{const e=t??function(e){return h(e).map(({props:{value:e,label:t,attributes:n,default:i}})=>({value:e,label:t,attributes:n,default:i}))}(n);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}function y({queryString:e=!1,groupId:t}){const n=(0,s.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(a),(0,i.useCallback)(e=>{if(!a)return;const t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})},[a,n])]}function b(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=m(e),[o,s]=(0,i.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r})),[c,d]=y({queryString:n,groupId:a}),[h,b]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,a]=(0,u.Dv)(t);return[n,(0,i.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:a}),f=(()=>{const e=c??h;return p({value:e,tabValues:r})?e:null})();(0,l.A)(()=>{f&&s(f)},[f]);return{selectedValue:o,selectValue:(0,i.useCallback)(e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),d(e),b(e)},[d,b,r]),tabValues:r}}var f=n(92303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(74848);function x({className:e,block:t,selectedValue:n,selectValue:i,tabValues:r}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const t=e.currentTarget,a=s.indexOf(t),o=r[a].value;o!==n&&(l(t),i(o))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:r.map(({value:e,label:t,attributes:i})=>(0,g.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:c,...i,className:(0,a.A)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function C({lazy:e,children:t,selectedValue:n}){const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===n);return e?(0,i.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:r.map((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function w(e){const t=b(e);return(0,g.jsxs)("div",{className:(0,a.A)(r.G.tabs.container,"tabs-container",v.tabList),children:[(0,g.jsx)(x,{...t,...e}),(0,g.jsx)(C,{...t,...e})]})}function E(e){const t=(0,f.A)();return(0,g.jsx)(w,{...e,children:h(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>o});n(96540);var i=n(34164);const a={tabItem:"tabItem_Ymn6"};var r=n(74848);function o({children:e,hidden:t,className:n}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(a.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var i=n(96540);const a={},r=i.createContext(a);function o(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(r.Provider,{value:t},e.children)}},54561:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"tutorials/programmatically-creating","title":"Programmatically Creating Entities","description":"Usually you will be creating Entities via the PlayCanvas Editor, building up collections of Components and scripts to create the various parts of your game. However, in some cases it is convenient to create Entities in your scripts. This tutorial shows you how.","source":"@site/docs/tutorials/programmatically-creating.md","sourceDirName":"tutorials","slug":"/tutorials/programmatically-creating","permalink":"/tutorials/programmatically-creating","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/programmatically-creating.md","tags":[{"inline":true,"label":"procedural","permalink":"/tags/procedural"},{"inline":true,"label":"basics","permalink":"/tags/basics"}],"version":"current","frontMatter":{"title":"Programmatically Creating Entities","tags":["procedural","basics"],"thumb":"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/406042/4479BC-image-75.jpg"},"sidebar":"tutorialsSidebar","previous":{"title":"Procedural Levels","permalink":"/tutorials/procedural-levels"},"next":{"title":"Rainbow Trail with Mesh API","permalink":"/tutorials/rainbow-trail-with-mesh-api"}}');var a=n(74848),r=n(28453),o=n(11470),s=n(19365);const l={title:"Programmatically Creating Entities",tags:["procedural","basics"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/406042/4479BC-image-75.jpg"},c=void 0,d={},u=[{value:"Creating an Entity",id:"creating-an-entity",level:2},{value:"Adding Components",id:"adding-components",level:2},{value:"Removing Components",id:"removing-components",level:2},{value:"Deleting Entities",id:"deleting-entities",level:2},{value:"In Action",id:"in-action",level:2}];function h(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"iframe-container",children:(0,a.jsx)("iframe",{src:"https://playcanv.as/p/1VjdIY7v/",title:"Programmatically Creating Entities",allow:"camera; microphone; xr-spatial-tracking; fullscreen",allowfullscreen:!0})}),"\n",(0,a.jsx)(t.p,{children:"Usually you will be creating Entities via the PlayCanvas Editor, building up collections of Components and scripts to create the various parts of your game. However, in some cases it is convenient to create Entities in your scripts. This tutorial shows you how."}),"\n",(0,a.jsx)(t.h2,{id:"creating-an-entity",children:"Creating an Entity"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"var entity = new pc.Entity(); // Create an Entity\n\n// Add it to the Entity hierarchy\nthis.app.root.addChild(entity);\n"})}),"\n",(0,a.jsxs)(t.p,{children:["First you need to create an Entity. This is straightforward, but it is important to add the Entity to the main Entity hierarchy. Only Entities in the hierarchy will have their transforms, Components and scripts updated. In your scripts you can access the root of the Entity hierarchy from the ",(0,a.jsx)(t.code,{children:"Application"})," object which is passed into your script. By convention this is usually named ",(0,a.jsx)(t.code,{children:"app"})," and the hierarchy root is available as ",(0,a.jsx)(t.code,{children:"this.app.root"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"adding-components",children:"Adding Components"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'// Create a new Entity\nvar entity = new pc.Entity();\n\n// Add a new Camera Component with default values\nentity.addComponent("camera");\n\n// Add a new Model Component and add it to the Entity.\nentity.addComponent("render", {\n    type: \'box\',\n});\n\n// Add it to the Entity hierarchy\nthis.app.root.addChild(entity);\n'})}),"\n",(0,a.jsxs)(t.p,{children:["An Entity on it's own doesn't do much, so you will need to add Components in order to add functionality to your Entity. You can use the ",(0,a.jsx)(t.code,{children:"addComponent"})," method of the Entity to create and add a new Component to the Entity."]}),"\n",(0,a.jsxs)(t.p,{children:["Each Component type has different properties that can be passed in on the data object, see the ",(0,a.jsx)(t.a,{href:"/user-manual/scenes/components/",children:"Component's documentation"})," for more detail about which properties are available. The ",(0,a.jsx)(t.code,{children:"data"})," argument can be left out and default values will be used."]}),"\n",(0,a.jsx)(t.h2,{id:"removing-components",children:"Removing Components"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'var entity = new pc.Entity();\n\n// Attach Camera Component with default values\nentity.addComponent("camera");\n\n// Delete the Camera Component\nentity.removeComponent("camera");\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Components can be deleted individually from an Entity by calling the ",(0,a.jsx)(t.code,{children:"removeComponent"})," method on the Entity."]}),"\n",(0,a.jsx)(t.h2,{id:"deleting-entities",children:"Deleting Entities"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'// Create a new Entity\nvar entity = new pc.Entity();\n\n// Create a new Camera Component with default values\nentity.addComponent("camera");\n\n// Create a new Model Component and add it to the Entity.\nentity.addComponent("render", {\n    type: \'box\',\n});\n\n// Add it to the Entity hierarchy\nthis.app.root.addChild(entity);\n\n// Delete the Entity and remove it from the hierarchy\nentity.destroy();\n'})}),"\n",(0,a.jsxs)(t.p,{children:["When you are finished with an Entity you call the ",(0,a.jsx)(t.code,{children:"destroy"})," method on the Entity. This will delete all Components and remove the Entity from the hierarchy. It will also delete all child Entities in the same way."]}),"\n",(0,a.jsx)(t.h2,{id:"in-action",children:"In Action"}),"\n","\n",(0,a.jsxs)(o.A,{defaultValue:"classic",groupId:"script-code",children:[(0,a.jsx)(s.A,{value:"esm",label:"ESM",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"import { Script, Entity, math } from 'playcanvas';\n\nexport class EntityCreator extends Script {\n    static scriptName = \"entityCreator\";\n\n    /**\n     * @attribute\n     * @title Material\n     * @type {Asset}\n     * @resource material\n     */\n    material = null;\n\n    /**\n     * @attribute\n     * @title Box Dimensions\n     * @type {number}\n     */\n    boxDimensions = 10;\n\n    /**\n     * @attribute\n     * @title Lifetime\n     * @type {number}\n     */\n    lifetime = 5;\n\n    /**\n     * @attribute\n     * @title Max Cubes\n     * @type {number}\n     */\n    maxCubes = 10;\n\n    // initialize code called once per entity\n    initialize() {\n        this.entities = [];\n    }\n\n    // update code called every frame\n    update(dt) {\n        // Spawn new cubes if there are less than maxCubes\n        while (this.entities.length < this.maxCubes) {\n            this.spawnCube();\n        }\n\n        // Loop through Entities and delete them when their time is up\n        for (let i = 0; i < this.entities.length; i++) {\n            this.entities[i].timer -= dt;\n            if (this.entities[i].timer < 0) {\n                // entity.destroy() deletes all components and removes Entity from the hierarchy\n                this.entities[i].entity.destroy();\n\n                // Remove from the local list\n                this.entities.splice(i, 1);\n            }\n        }\n    }\n\n    spawnCube() {\n        const entity = new Entity();\n\n        // Add a new Model Component and add it to the Entity.\n        entity.addComponent(\"render\", {\n            type: 'box'\n        });\n\n        // set material\n        entity.render.material = this.material.resource;\n\n        // Move to a random position\n        entity.setLocalPosition(\n            math.random(-this.boxDimensions, this.boxDimensions),\n            math.random(-this.boxDimensions, this.boxDimensions),\n            math.random(-this.boxDimensions, this.boxDimensions)\n        );\n\n        // Add to the Hierarchy\n        this.app.root.addChild(entity);\n\n        // Store in a list for some random duration before deleting\n        this.entities.push({\n            entity: entity,\n            timer: math.random(0, this.lifetime)\n        });\n    }\n}\n"})})}),(0,a.jsx)(s.A,{value:"classic",label:"Classic",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"var EntityCreator = pc.createScript('entityCreator');\n\nEntityCreator.attributes.add('material', {\n    type: 'asset',\n    assetType: 'material'\n});\n\nEntityCreator.attributes.add('boxDimensions', {\n    type: 'number',\n    default: 10\n});\n\nEntityCreator.attributes.add('lifetime', {\n    type: 'number',\n    default: 5\n});\n\nEntityCreator.attributes.add('maxCubes', {\n    type: 'number',\n    default: 10\n});\n\n// initialize code called once per entity\nEntityCreator.prototype.initialize = function() {\n    this.entities = [];\n};\n\n// update code called every frame\nEntityCreator.prototype.update = function(dt) {\n    // Spawn new cubes if there are less than maxCubes\n    while (this.entities.length < this.maxCubes) {\n        this.spawnCube();\n    }\n\n    // Loop through Entities and delete them when their time is up\n    for (i = 0; i < this.entities.length; i++) {\n        this.entities[i].timer -= dt;\n        if (this.entities[i].timer < 0) {\n            // entity.destroy() deletes all components and removes Entity from the hierarchy\n            this.entities[i].entity.destroy();\n\n            // Remove from the local list\n            this.entities.splice(i, 1);\n        }\n    }\n};\n\nEntityCreator.prototype.spawnCube = function () {\n    var entity = new pc.Entity();\n\n    // Add a new Model Component and add it to the Entity.\n    entity.addComponent(\"render\", {\n        type: 'box'\n    });\n\n    // set material\n    entity.render.material = this.material.resource;\n\n    // Move to a random position\n    entity.setLocalPosition(\n        pc.math.random(-this.boxDimensions, this.boxDimensions),\n        pc.math.random(-this.boxDimensions, this.boxDimensions),\n        pc.math.random(-this.boxDimensions, this.boxDimensions)\n    );\n\n    // Add to the Hierarchy\n    this.app.root.addChild(entity);\n\n    // Store in a list for some random duration before deleting\n    this.entities.push({\n        entity: entity,\n        timer: pc.math.random(0, this.lifetime)\n    });\n};\n"})})})]}),"\n",(0,a.jsx)(t.p,{children:"This is a complete Entity script which you can see in action at the top of the tutorial. It continually creates and destroys new Entities with a Model Component attached."}),"\n",(0,a.jsxs)(t.p,{children:["See ",(0,a.jsx)(t.a,{href:"https://playcanvas.com/editor/scene/440341",children:"the full scene here"}),"."]})]})}function m(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);