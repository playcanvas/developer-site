"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[89743],{28453:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>o});var i=r(96540);const a={},n=i.createContext(a);function s(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(n.Provider,{value:t},e.children)}},28965:(e,t,r)=>{r.d(t,{A:()=>i});const i=r.p+"assets/images/script-attributes-4cecd3ce6b71000d3ec60c7a2cfef611.png"},50888:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"user-manual/scripting/script-attributes","title":"Script Attributes","description":"Script Attributes are a powerful feature that lets you expose values from your script files so that they appear in the PlayCanvas Editor. This means you can write code once, and then tweak values on different instances of an Entity to give them different properties. This is perfect for exposing properties for artists, designers or other non-programmer team members so that they are able to adjust and modify values without writing code.","source":"@site/docs/user-manual/scripting/script-attributes.md","sourceDirName":"user-manual/scripting","slug":"/user-manual/scripting/script-attributes","permalink":"/user-manual/scripting/script-attributes","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/scripting/script-attributes.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Script Attributes","sidebar_position":5},"sidebar":"userManualSidebar","previous":{"title":"Application Lifecycle","permalink":"/user-manual/scripting/application-lifecyle"},"next":{"title":"Communication","permalink":"/user-manual/scripting/communication"}}');var a=r(74848),n=r(28453);const s={title:"Script Attributes",sidebar_position:5},o=void 0,c={},u=[{value:"Declaring Script Attributes",id:"declaring-script-attributes",level:2},{value:"Getting Attributes into Editor",id:"getting-attributes-into-editor",level:2},{value:"Accessing attributes in your code",id:"accessing-attributes-in-your-code",level:2},{value:"Updating attributes",id:"updating-attributes",level:2},{value:"Attribute types",id:"attribute-types",level:2},{value:"Entity attribute",id:"entity-attribute",level:3},{value:"Asset attribute",id:"asset-attribute",level:3},{value:"Color attribute",id:"color-attribute",level:3},{value:"Curve attribute",id:"curve-attribute",level:3},{value:"Enumeration attribute",id:"enumeration-attribute",level:3},{value:"JSON attribute",id:"json-attribute",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Script Attributes are a powerful feature that lets you expose values from your script files so that they appear in the PlayCanvas Editor. This means you can write code once, and then tweak values on different instances of an Entity to give them different properties. This is perfect for exposing properties for artists, designers or other non-programmer team members so that they are able to adjust and modify values without writing code."}),"\n",(0,a.jsx)(t.h2,{id:"declaring-script-attributes",children:"Declaring Script Attributes"}),"\n",(0,a.jsx)(t.p,{children:"Script Attributes are declared at the top of your script file using this format:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"var MyScript = pc.createScript('myScript');\n\nMyScript.attributes.add('speed', {\n    type: 'number',\n    default: 80\n});\n"})}),"\n",(0,a.jsxs)(t.p,{children:["In this example, we're declaring a property called ",(0,a.jsx)(t.code,{children:"speed"})," which is a ",(0,a.jsx)(t.code,{children:"number"})," and has a default value of ",(0,a.jsx)(t.code,{children:"80"}),":"]}),"\n",(0,a.jsxs)(t.p,{children:["If you need an array of attributes set ",(0,a.jsx)(t.code,{children:"array: true"})," like so:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"var MyScript = pc.createScript('myScript');\n\nMyScript.attributes.add('names', {\n    type: 'string',\n    array: true\n});\n"})}),"\n",(0,a.jsx)(t.h2,{id:"getting-attributes-into-editor",children:"Getting Attributes into Editor"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Script Attributes",src:r(28965).A+"",width:"534",height:"371"})}),"\n",(0,a.jsx)(t.p,{children:"Once you've declared your attributes the Editor needs to parse the code in order to expose the script attributes. If attributes have been changed, you need to manually refresh the attributes you can click the parse button."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Parse Button",src:r(84464).A+"",width:"56",height:"56"})}),"\n",(0,a.jsx)(t.h2,{id:"accessing-attributes-in-your-code",children:"Accessing attributes in your code"}),"\n",(0,a.jsxs)(t.p,{children:["When you declare an attribute in your script it will be available as a member variable on your script instance. For example, the ",(0,a.jsx)(t.code,{children:"speed"})," property declared above is available as ",(0,a.jsx)(t.code,{children:"this.speed"}),"."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.prototype.update = function (dt) {\n    this.entity.translate(this.speed * dt, 0, 0);\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"updating-attributes",children:"Updating attributes"}),"\n",(0,a.jsxs)(t.p,{children:["When you modify an attribute in the editor the changes are sent to any copies of the application launched from the editor. This means you can live edit your attributes without reloading your application. If you need to apply special behavior when an attribute changes. Use the ",(0,a.jsx)(t.code,{children:"attr"})," and ",(0,a.jsx)(t.code,{children:"attr:[name]"})," events to respond to changes"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.prototype.initialize = function () {\n    // fires only for `speed` attribute\n    this.on('attr:speed', function (value, prev) {\n        // new value for speed\n    });\n\n    // fires for all attribute changes\n    this.on('attr', function(name, value, prev) {\n        // new attribute value\n    });\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"attribute-types",children:"Attribute types"}),"\n",(0,a.jsxs)(t.p,{children:["When you declare an attribute you also declare the type of the attribute. This allows the editor to show the relevant controls for you to edit the attribute. Most types are self-explanatory, for example, 'boolean', 'number' or 'string'. But some require some further explanation in the below examples. See the ",(0,a.jsx)(t.a,{href:"https://api.playcanvas.com/engine/classes/ScriptAttributes.html",children:"full attribute reference"})," for more details."]}),"\n",(0,a.jsx)(t.h3,{id:"entity-attribute",children:"Entity attribute"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('target', { type: 'entity' })\n"})}),"\n",(0,a.jsx)(t.p,{children:"The Entity type lets your reference another entity in your hierarchy. A great way to link two entities together."}),"\n",(0,a.jsx)(t.h3,{id:"asset-attribute",children:"Asset attribute"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('textures', { type: 'asset', assetType: 'texture', array: true });\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The Asset attribute let's you reference a project asset in your script. The asset attribute also supports the ",(0,a.jsx)(t.code,{children:"assetType"})," property which limits the attribute to assets of a particular type, e.g. 'texture', 'material', 'model'."]}),"\n",(0,a.jsxs)(t.p,{children:["The runtime type of an Asset attribute is ",(0,a.jsx)(t.code,{children:"pc.Asset"}),". You can reference the resource of an Asset attribute at runtime like so:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('texture', {type: 'asset', assetType: 'texture'});\n\nMyScript.prototype.initialize = function () {\n    console.log('This is the texture asset', this.texture);\n    console.log('This is the texture resource', this.texture.resource);\n};\n\n"})}),"\n",(0,a.jsx)(t.h3,{id:"color-attribute",children:"Color attribute"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('color', { type: 'rgba' });\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The color attribute shows a color picker when exposed in the editor. There are two options ",(0,a.jsx)(t.code,{children:"rgb"})," and ",(0,a.jsx)(t.code,{children:"rgba"})," depending on whether you wish to expose the alpha channel as well."]}),"\n",(0,a.jsx)(t.h3,{id:"curve-attribute",children:"Curve attribute"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('wave', { type: 'curve' }); // one curve\nMyScript.attributes.add('wave', { type: 'curve', curves: [ 'x', 'y', 'z' ] }); // three curves: x, y, z\nMyScript.attributes.add('wave', { type: 'curve', color: 'r' }); // one curve for red channel\nMyScript.attributes.add('wave', { type: 'curve', color: 'rgba' }); // four curves for full color including alpha\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The curve attribute is used to express a value that changes over a time period. All curves are defined over the period 0.0 - 1.0. You can define multiple curves, for example if you wish to have a 3D position from a curve defined three curves for x,y,z using the ",(0,a.jsx)(t.code,{children:"curves"})," property. There is also a special curve editor for modifying colors using the ",(0,a.jsx)(t.code,{children:"color"})," property."]}),"\n",(0,a.jsx)(t.h3,{id:"enumeration-attribute",children:"Enumeration attribute"}),"\n",(0,a.jsx)(t.p,{children:"The Enumeration attribute allows you to choose one of the available options:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('value', {\n    type: 'number',\n    enum: [\n        { 'valueOne': 1 },\n        { 'valueTwo': 2 },\n        { 'valueThree': 3 }\n    ]\n});\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Use the enum property to declare the list of possible values for your enumeration. Property is an array of objects where each object is an option where ",(0,a.jsx)(t.code,{children:"key"})," is a title of an option and ",(0,a.jsx)(t.code,{children:"value"})," is a value for attribute. This property can be used for various attribute types, e.g. ",(0,a.jsx)(t.code,{children:"number"}),", ",(0,a.jsx)(t.code,{children:"string"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"json-attribute",children:"JSON attribute"}),"\n",(0,a.jsx)(t.p,{children:"The JSON attribute allows you to create nested attributes of the other attribute types. For every JSON attribute you must specify a schema to describe its properties. The schema contains other regular script attribute definitions like above. For example:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.attributes.add('gameConfig', {\n    type: 'json',\n    schema: [{\n        name: 'numEnemies',\n        type: 'number',\n        default: 10\n    }, {\n        name: 'enemyModels',\n        type: 'asset',\n        assetType: 'model',\n        array: true\n    }, {\n        name: 'godMode',\n        type: 'boolean',\n        default: false\n    }]\n});\n"})}),"\n",(0,a.jsxs)(t.p,{children:["You can also declare arrays of JSON attributes so that you can create arrays of editable objects. Just add ",(0,a.jsx)(t.code,{children:"array: true"})," when defining the JSON attribute like you do for other attribute types."]}),"\n",(0,a.jsx)(t.p,{children:"Here's an example of accessing the above attributes in a script:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"MyScript.prototype.update = function (dt) {\n    if (this.gameConfig.godMode) {\n        for (let i = 0; i < this.gameConfig.numEnemies; i++) {\n            // ...\n        }\n    }\n};\n"})}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"We currently do not support defining JSON attributes as children of other JSON attributes. You can only go 1 level deep when defining a JSON attribute."})})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},84464:(e,t,r)=>{r.d(t,{A:()=>i});const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaklEQVRoge2Y30tTYRjHv9Mz2i4czHGsLX8kCykdIsNBQ/F2UBdTdtEBvUjoEAYGXSRe9QfUhahYFwUWGAgZIWIQIWSwOxlDpAuRIPshbKjBIXZwR+rG6aRyHs/zrvPK+7naxnmf5/nwvD/OO8flyJVfOMVU/O8CWCMEeUcI8o4Q5B0hyDtCkHeEIO8IQd4RgrxjC8FgRwwRH5vYthDEuVYkBgYRvySRh7aHIACckRHtHYLaIcNJGNZB/adToFPBtSaXqTFuXz0CnkL3DGSXZjAx+xE6QT3kc8J9tg7BxioLESTI7QqG5QWMPV3ElsV67DNFi8l9weJc0rIcwKCDxXx+dx+PP5R+Lpi4B7Vtr+s/ljH1aAYrOZoamAqaRV97i4kXSWQNupg2EdSRXZo/vLFILrigQ7coa4s1uP7mCcYOyTUhfltF9wXrsW0hmM/pyBe++MLou9uHqGzuqPkXbAV3zQ/p6ulGyENXAjNBbXkak0nz4yoraetgIGhgKzWFBy+L1pSvDg2EXTEDuWDm/TOMvF7dX1PO2hju3FIQraHOdDzIjwltc3v/c3VYwc14M6orNGSoEx0TRueghIaYiv5OPwp7oeTxI+AvPdLtoK6EHC8iyg0kWrxFv1Uh1DOAEH2yktBvMpKM+vPe0s+VCfoOGqt4NTqObK+KqxcLE9SA9m0dmR0zgXR8/2m9HPIL7wEuhOIqrrfLcEJD+vlDTK+xyXQUDN9kdKzMjmNk/hPJzfykMOzgAc7aMFp2U0hvsM70J2W5LuW/ppAuR6K/YIvbBEuEIO8IQd4RgrwjBHlHCPKOEOSdUy/4G9E9heu7IE38AAAAAElFTkSuQmCC"}}]);