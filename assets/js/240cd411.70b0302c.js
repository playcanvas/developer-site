"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[35580],{7184:(e,t,s)=>{s.d(t,{C:()=>D,G:()=>C});var n=s(11470),a=s(19365),r=s(59849),i=s(96540),o=s(95293),c=s(58640),d=s(18676),l=s(58817),p=s(19748),h=s(83395),u=s(43025),m=s(10977),x=s(7306),y=s(55937),f=s(78692),j=s(8939),g=s(40050),v=s(93953),w=s(27351),S=s(74848);const b="// \u2191 imports hidden",C=({code:e,label:t,filename:s,language:o="jsx",showDemo:d=!1,showViewSourceButton:l=!0,showControls:p=!0,children:h})=>{const[u,m]=(0,i.useState)(0);if(!h||!e)return console.error("CodeExample: code and children are required"),null;return(0,S.jsxs)(n.A,{defaultValue:u>0?"Code":d?"Demo":"Code",children:[(0,S.jsx)(a.A,{value:"Demo",children:(0,S.jsxs)("div",{className:"code-example-demo",children:[h,l&&(0,S.jsxs)("div",{className:"code-example-demo-footer",children:[t," - ",(0,S.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),m(e=>e+1)},children:"View Code"})]}),(0,S.jsx)("div",{className:"code-example-controls",children:(0,S.jsx)(c.XA,{fill:!0,hidden:!1===p})})]})}),(0,S.jsx)(a.A,{value:"Code",children:(0,S.jsx)(r.A,{language:o,title:s,children:e.includes(b)?b+e.split(b)[1]:e})})]},u)},k=e=>{const{width:t=8,depth:s=8,intensity:n=.75}=e,a=(0,i.useMemo)(()=>new v.e(t,1,s),[t,s]);return(0,S.jsxs)(d.w,{children:[(0,S.jsx)(p.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:w.au1,shadowUpdateMode:w.M5l,vsmBlurSize:8,shadowIntensity:n,intensity:0}),(0,S.jsx)(h.e,{script:j.X,intensity:n,scale:a})]})},D=({children:e,useLight:t=!0,useControls:s=!1,useGrid:n=!1,useShadow:a=!1,camera:r=[0,0,10],sceneOffset:c=[0,-.501,0],exposure:p=1})=>{const{colorMode:j}=(0,o.G)(),v=(0,m.n)(),{asset:w}=(0,x.yj)("/assets/helipad.png"),b="dark"===j?"#2a2a2a":"#e4e0e0",[C,D]=(0,i.useState)(!1),[M,E]=(0,i.useState)(!1),A=(0,i.useCallback)(()=>D(!0),[]),R=(0,i.useCallback)(()=>D(!1),[]),P=(0,i.useCallback)(()=>E(!0),[]),T=(0,i.useCallback)(()=>E(!1),[]);return(0,i.useEffect)(()=>{const e=v.graphicsDevice.canvas;e.style.cursor=C?"grabbing":M?"grab":"default"},[C,M,v]),(0,i.useEffect)(()=>{const e=()=>D(!1);return v.graphicsDevice.canvas.addEventListener("pointerup",e),()=>v.graphicsDevice?.canvas.removeEventListener("pointerup",e)},[v]),(0,S.jsxs)(d.w,{children:[(0,S.jsxs)(d.w,{name:"camera",position:r,children:[(0,S.jsx)(l.i,{clearColor:b,renderSceneColorMap:!0}),s&&(0,S.jsx)(h.e,{script:y.a,enableFly:!1,pitchRange:new g.Z(-90,-5)})]}),t&&(0,S.jsx)(u.O,{envAtlas:w,showSkybox:!1,exposure:p}),n&&(0,S.jsx)(d.w,{name:"grid",scale:[1e3,1,1e3],position:[0,-.5,0],children:(0,S.jsx)(h.e,{script:f.x})}),a&&(0,S.jsx)(d.w,{position:c,children:(0,S.jsx)(k,{})}),(0,S.jsx)(d.w,{onPointerOver:P,onPointerOut:T,onPointerDown:A,onPointerUp:R,children:e})]})}},24421:(e,t,s)=>{s.d(t,{A:()=>p});var n=s(18676),a=s(19748),r=s(83395),i=s(93953),o=s(27351),c=s(8939),d=s(96540),l=s(74848);const p=e=>{const{width:t=2,depth:s=2,intensity:p=.75}=e,h=(0,d.useMemo)(()=>new i.e(t,1,s),[t,s]);return(0,l.jsxs)(n.w,{position:[0,.001,0],children:[(0,l.jsx)(a.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:o.au1,shadowUpdateMode:o.M5l,vsmBlurSize:8,shadowIntensity:p,intensity:0}),(0,l.jsx)(r.e,{script:c.X,intensity:p,scale:h})]})}},28381:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>g,contentTitle:()=>j,default:()=>S,frontMatter:()=>f,metadata:()=>n,toc:()=>v});const n=JSON.parse('{"id":"user-manual/react/api/script","title":"<Script/>","description":"Documentation for the Script component","source":"@site/docs/user-manual/react/api/script.mdx","sourceDirName":"user-manual/react/api","slug":"/user-manual/react/api/script","permalink":"/user-manual/react/api/script","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/react/api/script.mdx","tags":[],"version":"current","frontMatter":{"description":"Documentation for the Script component"},"sidebar":"userManualSidebar","previous":{"title":"<Rigidbody/>","permalink":"/user-manual/react/api/rigidbody"},"next":{"title":"Hooks","permalink":"/user-manual/react/api/hooks/"}}');var a=s(74848),r=s(28453),i=s(7184),o=s(58769),c=s(18676),d=s(16230),l=s(83395),p=s(85169),h=s(58640);const u={speed:{value:10,min:0,max:100,step:1}};class m extends p.e{update(e){this.entity.rotate(0,e*this.speed,0)}}const x=()=>{const{speed:e}=(0,h._5)(u);return(0,a.jsxs)(c.w,{children:[(0,a.jsx)(d.dw,{type:"box",castShadows:!0,receiveShadows:!0}),(0,a.jsx)(l.e,{script:m,speed:e})]})},y="import { Entity } from '@playcanvas/react';\nimport { Script, Render } from '@playcanvas/react/components';\nimport { Script as PcScript } from 'playcanvas';\nimport { useControls } from 'leva';\n\n\nconst vars = {\n  speed: { value: 10, min: 0, max: 100, step: 1 }\n};\n// \u2191 imports hidden\n\n// This class runs in the scope of the entity it's attached to\nclass SpinMe extends PcScript {\n  update(dt) {\n    this.entity.rotate(0, dt * this.speed, 0);\n  }\n}\n\nexport const ScriptExample = () => {\n  const { speed } = useControls(vars);\n\n  return (\n    <Entity>\n      <Render type=\"box\" castShadows receiveShadows />\n      <Script script={SpinMe} speed={speed} />\n    </Entity>\n  );\n};\n\n",f={description:"Documentation for the Script component"},j="<Script/>",g={},v=[{value:"Usage",id:"usage",level:2},{value:"Properties",id:"properties",level:2}];function w(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components},{RenderApiDocs:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("RenderApiDocs",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"script",children:(0,a.jsx)(t.code,{children:"<Script/>"})})}),"\n","\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"<Script/>"})," component provides a simple imperative way to add behaviors to an ",(0,a.jsx)(t.a,{href:"../entity",children:(0,a.jsx)(t.code,{children:"<Entity/>"})}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["This is useful for things like ",(0,a.jsx)(t.a,{href:"../../guide/physics",children:"physics"}),", animation, and ",(0,a.jsx)(t.a,{href:"../../guide/interactivity",children:"interactivity"})," where, for performance reasons, you want to bypass updating React props. It allows you to hook into the engine's update loop outside of React, which is useful for performance-critical code. You can also leverage existing Scripts from PlayCanvas Editor Projects."]}),"\n",(0,a.jsxs)(t.p,{children:["You can find more information about ",(0,a.jsx)(t.a,{href:"/user-manual/scripting/",children:"Scripts"})," in the Engine documentation."]}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"Script"})," component takes a class that extends the PlayCanvas ",(0,a.jsx)(t.a,{href:"https://api.playcanvas.com/engine/classes/Script.html",children:"Script"})," class and attaches it to the ",(0,a.jsx)(t.code,{children:"Entity"}),". Any additional props are passed to the Script class directly and can be used as properties on the class."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"import { Script } from '@playcanvas/react/components'\nimport { CameraControls } from 'playcanvas/scripts/esm/camera-controls.mjs'\n\nreturn <Script script={CameraControls} />\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The following examples adds a ",(0,a.jsx)(t.code,{children:"SpinMe"})," script to the entity that rotates the entity every frame."]}),"\n",(0,a.jsx)(i.G,{label:"Script component with rotation behavior",code:y,showDemo:!0,children:(0,a.jsx)(o.l,{children:(0,a.jsx)(i.C,{useLight:!0,useShadow:!0,useGrid:!0,camera:[3,3,3],useControls:!0,children:(0,a.jsx)(x,{})})})}),"\n",(0,a.jsxs)(t.p,{children:["You can use any existing Script or create your own, or any from the engine repository for ",(0,a.jsx)(t.a,{href:"https://github.com/playcanvas/engine/tree/main/scripts/esm",children:"existing Scripts"}),"."]}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsxs)(t.p,{children:["The PlayCanvas engine contains a number of useful scripts that you can use in your projects. ",(0,a.jsxs)(t.strong,{children:["Find them ",(0,a.jsx)(t.a,{href:"https://github.com/playcanvas/engine/tree/main/scripts/esm",children:"here"})]}),"."]})}),"\n",(0,a.jsxs)(t.p,{children:["You can learn more about the anatomy of a ESM Script in the ",(0,a.jsx)(t.a,{href:"/user-manual/scripting/esm-scripts",children:"Scripting documentation"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsx)(s,{data:'[{"name":"default","description":"","entries":[{"name":"script","description":"The Script class to attach to the entity","optional":false,"type":{"displayName":"SubclassOf<Script>","types":[{"name":"__type","url":null}]}}]}]'})]})}function S(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(w,{...e})}):w(e)}},49801:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(18676),a=s(83395),r=s(78692),i=s(74848);const o=({...e})=>(0,i.jsx)(n.w,{scale:[1e3,1,1e3],children:(0,i.jsx)(a.e,{script:r.x,...e})})},53558:(e,t,s)=>{s.d(t,{A:()=>j});var n=s(96540),a=s(55937),r=s(8939),i=s(78692),o=s(54256),c=s(25303),d=s(34363),l=s(53512),p=s(49801),h=s(24421),u=s(85593),m=s(83395),x=s(83171),y=s(74848);const f=e=>(0,y.jsx)(m.e,{script:x.d,...e}),j={React:n,...n,...o,...c,...d,...l,Grid:p.A,ShadowCatcher:h.A,GridScript:i.x,ShadowCatcherScript:r.X,StaticPostEffects:u.A,AutoRotate:f,CameraControls:a.a}},85593:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(83395),a=s(15817),r=s(74848);const i=e=>{const t={lighting:{exposure:1.21,skyBoxIntensity:1.02},rendering:{renderFormat:18,renderTargetScale:1,sharpness:0,samples:4,toneMapping:4,fog:"none",fogColor:{r:0,g:0,b:0,a:1},fogRange:[0,100],fogDensity:.01,renderFormatFallback0:12,renderFormatFallback1:14,sceneColorMap:!1,sceneDepthMap:!1,fogStart:0,fogEnd:100},bloom:{enabled:!0,intensity:.1,lastMipLevel:1},grading:{enabled:!0,brightness:.83,contrast:1.1,saturation:1.2,tint:{r:1,g:.9333333333333333,b:.8666666666666667,a:1}},vignette:{enabled:!0,intensity:1,inner:.25,outer:1.52,curvature:.78},fringing:{enabled:!0,intensity:10},...e};return(0,r.jsx)(n.e,{script:a.P,...t})}}}]);