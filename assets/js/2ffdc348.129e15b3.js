"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[58175],{11470:(e,t,n)=>{n.d(t,{A:()=>E});var s=n(96540),o=n(34164),a=n(17559),i=n(23104),r=n(56347),l=n(205),c=n(57485),u=n(31682),h=n(70679);function d(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,s.useMemo)(()=>{const e=t??function(e){return d(e).map(({props:{value:e,label:t,attributes:n,default:s}})=>({value:e,label:t,attributes:n,default:s}))}(n);return function(e){const t=(0,u.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function m({value:e,tabValues:t}){return t.some(t=>t.value===e)}function b({queryString:e=!1,groupId:t}){const n=(0,r.W6)(),o=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(o),(0,s.useCallback)(e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})},[o,n])]}function v(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=p(e),[i,r]=(0,s.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:a})),[c,u]=b({queryString:n,groupId:o}),[d,v]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,o]=(0,h.Dv)(t);return[n,(0,s.useCallback)(e=>{t&&o.set(e)},[t,o])]}({groupId:o}),f=(()=>{const e=c??d;return m({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{f&&r(f)},[f]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);r(e),u(e),v(e)},[u,v,a]),tabValues:a}}var f=n(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(74848);function M({className:e,block:t,selectedValue:n,selectValue:s,tabValues:a}){const r=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const t=e.currentTarget,o=r.indexOf(t),i=a[o].value;i!==n&&(l(t),s(i))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=r.indexOf(e.currentTarget)+1;t=r[n]??r[0];break}case"ArrowLeft":{const n=r.indexOf(e.currentTarget)-1;t=r[n]??r[r.length-1];break}}t?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":t},e),children:a.map(({value:e,label:t,attributes:s})=>(0,j.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{r.push(e)},onKeyDown:u,onClick:c,...s,className:(0,o.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function x({lazy:e,children:t,selectedValue:n}){const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===n);return e?(0,s.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:a.map((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function y(e){const t=v(e);return(0,j.jsxs)("div",{className:(0,o.A)(a.G.tabs.container,"tabs-container",g.tabList),children:[(0,j.jsx)(M,{...t,...e}),(0,j.jsx)(x,{...t,...e})]})}function E(e){const t=(0,f.A)();return(0,j.jsx)(y,{...e,children:d(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>i});n(96540);var s=n(34164);const o={tabItem:"tabItem_Ymn6"};var a=n(74848);function i({children:e,hidden:t,className:n}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.A)(o.tabItem,n),hidden:t,children:e})}},19406:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"tutorials/mouse-input","title":"Basic Mouse Input","description":"Move the mouse to move the cube around. Press the mouse buttons to change the color of the cube.","source":"@site/docs/tutorials/mouse-input.md","sourceDirName":"tutorials","slug":"/tutorials/mouse-input","permalink":"/tutorials/mouse-input","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/mouse-input.md","tags":[{"inline":true,"label":"mouse","permalink":"/tags/mouse"},{"inline":true,"label":"input","permalink":"/tags/input"}],"version":"current","frontMatter":{"title":"Basic Mouse Input","tags":["mouse","input"],"thumb":"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405819/2DF062-image-75.jpg"},"sidebar":"tutorialsSidebar","previous":{"title":"More Cameras","permalink":"/tutorials/more-cameras"},"next":{"title":"Multiple Camera Layers","permalink":"/tutorials/multiple-camera-layers"}}');var o=n(74848),a=n(28453),i=n(11470),r=n(19365);const l={title:"Basic Mouse Input",tags:["mouse","input"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405819/2DF062-image-75.jpg"},c=void 0,u={},h=[{value:"Accessing the mouse",id:"accessing-the-mouse",level:3},{value:"Disabling the right-click menu",id:"disabling-the-right-click-menu",level:3},{value:"Binding to events",id:"binding-to-events",level:3},{value:"Moving the mouse",id:"moving-the-mouse",level:3},{value:"Mouse buttons",id:"mouse-buttons",level:3},{value:"Try it out",id:"try-it-out",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"iframe-container",children:(0,o.jsx)("iframe",{src:"https://playcanv.as/p/MHIdZgaj/?overlay=false",title:"Basic Mouse Input",allow:"camera; microphone; xr-spatial-tracking; fullscreen",allowfullscreen:!0})}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsx)(t.p,{children:"Move the mouse to move the cube around. Press the mouse buttons to change the color of the cube."})}),"\n",(0,o.jsxs)(t.p,{children:["Mouse handling in the PlayCanvas engine is provided by the ",(0,o.jsx)(t.code,{children:"pc.Mouse"})," object. The Mouse object provides a simple interface for detecting when the mouse is moved or when mouse buttons are pressed. It also removes some of the cross-browser inconsistencies with handling mouse co-ordinates."]}),"\n",(0,o.jsxs)(t.p,{children:["Take a look at the ",(0,o.jsx)(t.a,{href:"https://playcanvas.com/project/405819/overview/tutorial-basic-mouse-input",children:"tutorial project"}),". Here is the code from mouse.js:"]}),"\n","\n",(0,o.jsxs)(i.A,{defaultValue:"classic",groupId:"script-code",children:[(0,o.jsx)(r.A,{value:"esm",label:"ESM",children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"import { Script, Vec3, MOUSEBUTTON_LEFT, MOUSEBUTTON_MIDDLE, MOUSEBUTTON_RIGHT } from 'playcanvas';\n\nexport class Mouse extends Script {\n    static scriptName = \"mouse\";\n\n    /**\n     * @attribute\n     * @title Red Material\n     * @type {Asset}\n     * @resource material\n     */\n    redMaterial = null;\n\n    /**\n     * @attribute\n     * @title Green Material\n     * @type {Asset}\n     * @resource material\n     */\n    greenMaterial = null;\n\n    /**\n     * @attribute\n     * @title Blue Material\n     * @type {Asset}\n     * @resource material\n     */\n    blueMaterial = null;\n\n    // initialize code called once per entity\n    initialize() {\n        this.pos = new Vec3();\n\n        // Disabling the context menu stops the browser displaying a menu when\n        // you right-click the page\n        this.app.mouse.disableContextMenu();\n\n        // Use the on() method to attach event handlers.\n        // The mouse object supports events on move, button down and\n        // up, and scroll wheel.\n        this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n    }\n\n    onMouseMove(event) {\n        // Use the camera component's screenToWorld function to convert the\n        // position of the mouse into a position in 3D space\n        var depth = 10;\n        var cameraEntity = this.app.root.findByName('Camera');\n        cameraEntity.camera.screenToWorld(event.x, event.y, depth, this.pos);\n\n        // Finally update the cube's world-space position\n        this.entity.setPosition(this.pos);\n    }\n\n    onMouseDown(event) {\n        // If the left mouse button is pressed, change the cube color to red\n        if (event.button === MOUSEBUTTON_LEFT) {\n            this.entity.model.meshInstances[0].material = this.redMaterial.resource;\n        }\n        \n        // If the middle mouse button is pressed, change the cube color to green\n        if (event.button === MOUSEBUTTON_MIDDLE) {\n            this.entity.model.meshInstances[0].material = this.greenMaterial.resource;\n        }\n        \n        // If the right mouse button is pressed, change the cube color to blue\n        if (event.button === MOUSEBUTTON_RIGHT) {\n            this.entity.model.meshInstances[0].material = this.blueMaterial.resource;\n        }\n    }\n}\n"})})}),(0,o.jsx)(r.A,{value:"classic",label:"Classic",children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"var Mouse = pc.createScript('mouse');\n\nMouse.attributes.add('redMaterial', {\n    type: 'asset',\n    assetType: 'material'\n});\n\nMouse.attributes.add('greenMaterial', {\n    type: 'asset',\n    assetType: 'material'\n});\n\nMouse.attributes.add('blueMaterial', {\n    type: 'asset',\n    assetType: 'material'\n});\n\n// initialize code called once per entity\nMouse.prototype.initialize = function() {\n    this.pos = new pc.Vec3();\n\n    // Disabling the context menu stops the browser displaying a menu when\n    // you right-click the page\n    this.app.mouse.disableContextMenu();\n\n    // Use the on() method to attach event handlers.\n    // The mouse object supports events on move, button down and\n    // up, and scroll wheel.\n    this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n    this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n};\n\nMouse.prototype.onMouseMove = function (event) {\n    // Use the camera component's screenToWorld function to convert the\n    // position of the mouse into a position in 3D space\n    var depth = 10;\n    var cameraEntity = this.app.root.findByName('Camera');\n    cameraEntity.camera.screenToWorld(event.x, event.y, depth, this.pos);\n\n    // Finally update the cube's world-space position\n    this.entity.setPosition(this.pos);\n};\n\nMouse.prototype.onMouseDown = function (event) {\n    // If the left mouse button is pressed, change the cube color to red\n    if (event.button === pc.MOUSEBUTTON_LEFT) {\n        this.entity.render.meshInstances[0].material = this.redMaterial.resource;\n    }\n\n    // If the middle mouse button is pressed, change the cube color to green\n    if (event.button === pc.MOUSEBUTTON_MIDDLE) {\n        this.entity.render.meshInstances[0].material = this.greenMaterial.resource;\n    }\n\n    // If the right mouse button is pressed, change the cube color to blue\n    if (event.button === pc.MOUSEBUTTON_RIGHT) {\n        this.entity.render.meshInstances[0].material = this.blueMaterial.resource;\n    }\n};\n"})})})]}),"\n",(0,o.jsx)(t.h3,{id:"accessing-the-mouse",children:"Accessing the mouse"}),"\n",(0,o.jsxs)(t.p,{children:["Mouse control is managed by the ",(0,o.jsx)(t.code,{children:"pc.Mouse"})," object. The ",(0,o.jsx)(t.a,{href:"/user-manual/glossary#framework",children:"framework"})," provides an instance of this on the ",(0,o.jsx)(t.a,{href:"/user-manual/glossary#application",children:"application app"})," which is available to all script objects as:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"this.app.mouse\n"})}),"\n",(0,o.jsx)(t.h3,{id:"disabling-the-right-click-menu",children:"Disabling the right-click menu"}),"\n",(0,o.jsx)(t.p,{children:"In the constructor for our script object we disable the right-click menu to stop it popping up when we click the right mouse button."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"this.app.mouse.disableContextMenu();\n"})}),"\n",(0,o.jsx)(t.h3,{id:"binding-to-events",children:"Binding to events"}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"pc.Mouse"})," object allows you to listen to different events corresponding to mouse actions. In the tutorial, we are binding the method ",(0,o.jsx)(t.code,{children:"onMouseMove"})," to the move event and ",(0,o.jsx)(t.code,{children:"onMouseDown"})," to the button down event."]}),"\n",(0,o.jsxs)(t.p,{children:["Notice how we also pass ",(0,o.jsx)(t.code,{children:"this"})," into the on() method for binding to events. This third argument is the object that is used as ",(0,o.jsx)(t.code,{children:"this"})," in the event callback."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\nthis.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Events available on ",(0,o.jsx)(t.code,{children:"pc.Mouse"})," are:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"pc.EVENT_MOUSEUP"})," - fires when a mouse button is released"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"pc.EVENT_MOUSEDOWN"})," - fires when a mouse button is pressed"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"pc.EVENT_MOUSEMOVE"})," - fires when the mouse is moved"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"pc.EVENT_MOUSEWHEEL"})," - fires when the mouse wheel is rotated."]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Mouse input in browsers is usually implemented by listening to ",(0,o.jsx)(t.a,{href:"/user-manual/glossary#dom",children:"DOM"})," events on elements in your page's DOM. The problem is that different browsers implement the events slightly differently and supply different values. In order to simplify the code you write the PlayCanvas engine allows you to bind your event handlers to the PlayCanvas mouse handler instead of directly the DOM Element. The engine supplies a ",(0,o.jsx)(t.code,{children:"pc.MouseEvent"})," object when the event fires which is consistent across all browsers. If you do need the original DOM event, it is available as the ",(0,o.jsx)(t.code,{children:"event"})," property in ",(0,o.jsx)(t.code,{children:"pc.MouseEvent"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"moving-the-mouse",children:"Moving the mouse"}),"\n",(0,o.jsxs)(t.p,{children:["The first event handler is ",(0,o.jsx)(t.code,{children:"onMouseMove"}),". This is fired whenever the mouse moves. For an ",(0,o.jsx)(t.code,{children:"EVENT_MOUSEMOVE"})," event, the ",(0,o.jsx)(t.code,{children:"MouseEvent"})," object will have the current position of the mouse ",(0,o.jsx)(t.code,{children:"x"})," and ",(0,o.jsx)(t.code,{children:"y"})," and also the change in position since the last event in ",(0,o.jsx)(t.code,{children:"dx"})," and ",(0,o.jsx)(t.code,{children:"dy"}),". In our tutorial we're using the current position of the mouse and moving the cube to the cursor position."]}),"\n",(0,o.jsx)(t.h3,{id:"mouse-buttons",children:"Mouse buttons"}),"\n",(0,o.jsxs)(t.p,{children:["The second event handler is ",(0,o.jsx)(t.code,{children:"onMouseDown"}),". This is fired whenever one of the three mouse buttons is clicked. In the ",(0,o.jsx)(t.code,{children:"EVENT_MOUSEDOWN"})," and ",(0,o.jsx)(t.code,{children:"EVENT_MOUSEUP"})," events, the ",(0,o.jsx)(t.code,{children:"MouseEvent"})," object will have a ",(0,o.jsx)(t.code,{children:"button"})," property which contains the button that has been pressed/released. It can be one of the following values:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"pc.MOUSEBUTTON_NONE"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"pc.MOUSEBUTTON_LEFT"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"pc.MOUSEBUTTON_MIDDLE"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"pc.MOUSEBUTTON_RIGHT"})}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"In our tutorial, we're changing the color of the cube depending on which mouse button was pressed."}),"\n",(0,o.jsx)(t.h3,{id:"try-it-out",children:"Try it out"}),"\n",(0,o.jsxs)(t.p,{children:["Try the tutorial in full screen ",(0,o.jsx)(t.a,{href:"https://playcanv.as/p/MHIdZgaj/",children:"here"})," or at the top of the page. Move the mouse to move the cube and click the left, middle and right mouse button to change the color of the cube."]})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var s=n(96540);const o={},a=s.createContext(o);function i(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);