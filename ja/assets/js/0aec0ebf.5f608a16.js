"use strict";(globalThis.webpackChunkdeveloper_playcanvas_com=globalThis.webpackChunkdeveloper_playcanvas_com||[]).push([[99623],{7184:(e,n,t)=>{t.d(n,{C:()=>k,G:()=>C});var s=t(11470),a=t(19365),i=t(59849),r=t(96540),o=t(95293),c=t(9764),l=t(18676),d=t(58817),p=t(19748),h=t(83395),u=t(43025),m=t(10977),v=t(7306),x=t(68869),y=t(78692),j=t(8939),f=t(40050),g=t(93953),w=t(27351),b=t(74848);const S="// \u2191 imports hidden",C=({code:e,label:n,filename:t,language:o="jsx",showDemo:l=!1,showViewSourceButton:d=!0,showControls:p=!0,children:h})=>{const[u,m]=(0,r.useState)(0);if(!h||!e)return console.error("CodeExample: code and children are required"),null;return(0,b.jsxs)(s.A,{defaultValue:u>0?"Code":l?"Demo":"Code",children:[(0,b.jsx)(a.A,{value:"Demo",children:(0,b.jsxs)("div",{className:"code-example-demo",children:[h,d&&(0,b.jsxs)("div",{className:"code-example-demo-footer",children:[n," - ",(0,b.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),m(e=>e+1)},children:"View Code"})]}),(0,b.jsx)("div",{className:"code-example-controls",children:(0,b.jsx)(c.XA,{fill:!0,hidden:!1===p})})]})}),(0,b.jsx)(a.A,{value:"Code",children:(0,b.jsx)(i.A,{language:o,title:t,children:e.includes(S)?S+e.split(S)[1]:e})})]},u)},E=e=>{const{width:n=8,depth:t=8,intensity:s=.75}=e,a=(0,r.useMemo)(()=>new g.e(n,1,t),[n,t]);return(0,b.jsxs)(l.w,{children:[(0,b.jsx)(p.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:w.au1,shadowUpdateMode:w.M5l,vsmBlurSize:8,shadowIntensity:s,intensity:0}),(0,b.jsx)(h.e,{script:j.X,intensity:s,scale:a})]})},k=({children:e,useLight:n=!0,useControls:t=!1,useGrid:s=!1,useShadow:a=!1,camera:i=[0,0,10],sceneOffset:c=[0,-.501,0],exposure:p=1})=>{const{colorMode:j}=(0,o.G)(),g=(0,m.n)(),{asset:w}=(0,v.yj)("/assets/helipad.png"),S="dark"===j?"#2a2a2a":"#e4e0e0",[C,k]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),M=(0,r.useCallback)(()=>k(!0),[]),P=(0,r.useCallback)(()=>k(!1),[]),D=(0,r.useCallback)(()=>R(!0),[]),O=(0,r.useCallback)(()=>R(!1),[]);return(0,r.useEffect)(()=>{const e=g.graphicsDevice.canvas;e.style.cursor=C?"grabbing":A?"grab":"default"},[C,A,g]),(0,r.useEffect)(()=>{const e=()=>k(!1);return g.graphicsDevice.canvas.addEventListener("pointerup",e),()=>g.graphicsDevice?.canvas.removeEventListener("pointerup",e)},[g]),(0,b.jsxs)(l.w,{children:[(0,b.jsxs)(l.w,{name:"camera",position:i,children:[(0,b.jsx)(d.i,{clearColor:S,renderSceneColorMap:!0}),t&&(0,b.jsx)(h.e,{script:x.a,enableFly:!1,pitchRange:new f.Z(-90,-5)})]}),n&&(0,b.jsx)(u.O,{envAtlas:w,showSkybox:!1,exposure:p}),s&&(0,b.jsx)(l.w,{name:"grid",scale:[1e3,1,1e3],position:[0,-.5,0],children:(0,b.jsx)(h.e,{script:y.x})}),a&&(0,b.jsx)(l.w,{position:c,children:(0,b.jsx)(E,{})}),(0,b.jsx)(l.w,{onPointerOver:D,onPointerOut:O,onPointerDown:M,onPointerUp:P,children:e})]})}},18280:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>C,contentTitle:()=>S,default:()=>A,frontMatter:()=>b,metadata:()=>s,toc:()=>E});const s=JSON.parse('{"id":"user-manual/playcanvas-react/guide/interactivity","title":"Interactivity","description":"Once you have a scene, you\'ll want to make it interactive. You can do this in a number of ways depending on your use case.","source":"@site/docs/user-manual/playcanvas-react/guide/interactivity.mdx","sourceDirName":"user-manual/playcanvas-react/guide","slug":"/user-manual/playcanvas-react/guide/interactivity","permalink":"/ja/user-manual/playcanvas-react/guide/interactivity","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/playcanvas-react/guide/interactivity.mdx","tags":[],"version":"current","frontMatter":{"title":"Interactivity"},"sidebar":"userManualSidebar","previous":{"title":"Concepts","permalink":"/ja/user-manual/playcanvas-react/guide/"},"next":{"title":"Loading Assets","permalink":"/ja/user-manual/playcanvas-react/guide/loading-assets"}}');var a=t(74848),i=t(28453),r=t(7184),o=t(78264),c=t(96540),l=t(18676),d=t(16230),p=t(30885);const h=()=>{const e=["lavender","lightsteelblue","powderblue","rebeccapurple"],[n,t]=(0,c.useState)("lightsteelblue"),s=(0,p.R)({diffuse:n});return(0,a.jsx)(l.w,{name:"sphere",onClick:()=>{t(e[Math.floor(Math.random()*e.length)])},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="default",children:(0,a.jsx)(d.d,{type:"sphere",material:s})})},u="import { useState } from 'react'\nimport { Entity } from '@playcanvas/react'\nimport { Render } from '@playcanvas/react/components'\nimport { useMaterial } from '@playcanvas/react/hooks'\n\nexport const Interactivity = () => {\n  const colors = [\n    'lavender', 'lightsteelblue', 'powderblue', 'rebeccapurple'\n  ]\n\n  // Create the initial diffuse color and create the material\n  const [diffuse, setDiffuse] = useState('lightsteelblue')\n  const material = useMaterial({ diffuse })\n\n  const onRequestRandomColor = () => {\n    setDiffuse(colors[Math.floor(Math.random() * colors.length)])\n  }\n\n  // Attach hover and leave handlers to the sphere\n  const onHover = () => document.body.style.cursor = 'pointer'\n  const onLeave = () => document.body.style.cursor = 'default'\n\n  return (\n    // Attach an onClick handler to the sphere to request a color change\n    <Entity\n      name=\"sphere\"\n      onClick={onRequestRandomColor}\n      onPointerOver={onHover}\n      onPointerOut={onLeave} >\n        <Render type=\"sphere\" material={material} />\n    </Entity>\n  )\n}\n";var m=t(83395),v=t(85169);class x extends v.e{static scriptName="spinningCube";speed=10;update(e){this.entity.rotate(0,e*this.speed,e*this.speed*2)}}const y=()=>(0,a.jsxs)(l.w,{children:[(0,a.jsx)(d.d,{type:"box"}),(0,a.jsx)(m.e,{script:x,speed:10})]}),j="import { Entity } from '@playcanvas/react'\nimport { Render } from '@playcanvas/react/components'\nimport { Script } from '@playcanvas/react/components'\nimport { Script as PcScript } from 'playcanvas'\n\n/**\n * A simple script that rotates the entity it's attached to.\n */\nclass SpinningCube extends PcScript {\n    static scriptName = 'spinningCube'\n    speed = 10\n    update(dt) {\n        this.entity.rotate(0, dt * this.speed, dt * this.speed * 2)\n    }\n}\n\nexport const Scripting = () => (\n    <Entity>\n        <Render type=\"box\" />\n        <Script script={SpinningCube} speed={10} />\n    </Entity>\n)\n";var f=t(50224);const g=()=>{const e=(0,c.useRef)(null);(0,f.f)("update",n=>{e.current?.rotate(0,10*n,10*n*2)});return(0,a.jsx)(l.w,{ref:e,children:(0,a.jsx)(d.d,{type:"capsule"})})},w="import { useAppEvent } from '@playcanvas/react/hooks'\nimport { Entity } from '@playcanvas/react'\nimport { Render } from '@playcanvas/react/components'\nimport { useRef } from 'react'\n\nexport const AppEvents = () => {\n  const speed = 10;\n  const boxRef = useRef(null);\n\n  useAppEvent('update', (dt) => {\n    boxRef.current?.rotate(0, dt * speed, dt * speed * 2);\n  });\n\n  const onEntityClick = () => {\n    console.log('Entity clicked');\n  }\n\n  return (\n    <Entity ref={boxRef}>\n      <Render type='capsule' />\n    </Entity>\n  )\n}\n",b={title:"Interactivity"},S=void 0,C={},E=[{value:"Pointer Events",id:"pointer-events",level:3},{value:"The <code>Script</code> component",id:"the-script-component",level:3},{value:"Application events",id:"application-events",level:3},{value:"Next steps",id:"next-steps",level:2}];function k(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Once you have a scene, you'll want to make it interactive. You can do this in a number of ways depending on your use case."}),"\n",(0,a.jsx)(n.h3,{id:"pointer-events",children:"Pointer Events"}),"\n",(0,a.jsxs)(n.p,{children:["You can attach pointer events to an ",(0,a.jsx)(n.code,{children:"Entity"})," to respond to user interaction. It's a simple way to handle user input in a reactive way."]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["Pointer events bubble up. You can attach events to a parent ",(0,a.jsx)(n.code,{children:"Entity"})," and events will propagate up through the React tree."]})}),"\n",(0,a.jsx)(n.p,{children:"Let's make a sphere that changes color when you click it."}),"\n",(0,a.jsx)(r.G,{label:"Using pointer events",filename:"interactivity.jsx",code:u,showDemo:!0,children:(0,a.jsx)(o.l,{children:(0,a.jsx)(r.C,{children:(0,a.jsx)(h,{})})})}),"\n",(0,a.jsx)(n.p,{children:"Entities support the following pointer events which closely match the behavior of the DOM Pointer Events API."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"onPointerUp"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"onPointerDown"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"onPointerOver"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"onPointerOut"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"onClick"})}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"the-script-component",children:["The ",(0,a.jsx)(n.code,{children:"Script"})," component"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Script"})," component is a handy way to add custom behavior to an ",(0,a.jsx)(n.code,{children:"Entity"}),". It's a convenient way to attach any ESM PlayCanvas ",(0,a.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Script.html",children:"Script"})," to an ",(0,a.jsx)(n.code,{children:"Entity"}),". This is useful for interactivity or animations or anything that needs to happen outside the React render loop."]}),"\n",(0,a.jsxs)(n.p,{children:["You assign an ESM PlayCanvas ",(0,a.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Script.html",children:"Script"})," to the ",(0,a.jsx)(n.code,{children:"script"})," prop of a ",(0,a.jsx)(n.code,{children:"<Script>"})," component."]}),"\n",(0,a.jsx)(r.G,{label:"Rotating a cube with a Script",filename:"scripting.jsx",code:j,showDemo:!0,children:(0,a.jsx)(o.l,{children:(0,a.jsx)(r.C,{children:(0,a.jsx)(y,{})})})}),"\n",(0,a.jsxs)(n.p,{children:["PlayCanvas Scripts are ESM modules that extend the ",(0,a.jsx)(n.code,{children:"Script"})," class. You can use any existing Script or create your own, or any from the engine repository for ",(0,a.jsx)(n.a,{href:"https://github.com/playcanvas/engine/tree/main/scripts/esm",children:"existing Scripts"}),"."]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["If you need to animate something every frame, using a ",(0,a.jsx)(n.code,{children:"<Script>"})," component is generally more performant than re-rendering the React tree, however a Script can override Entity props."]})}),"\n",(0,a.jsxs)(n.p,{children:["You can read more about ",(0,a.jsx)(n.a,{href:"/user-manual/scripting/",children:"Scripts in the docs"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"application-events",children:"Application events"}),"\n",(0,a.jsxs)(n.p,{children:["A more React-like way to handle interactivity is to use the ",(0,a.jsx)(n.code,{children:"useAppEvent"})," hook. This hook allows you to subscribe to PlayCanvas application events with proper TypeScript support. It supports both built-in events and custom events with their specific callback signatures."]}),"\n",(0,a.jsxs)(n.p,{children:["The following example hooks into the ",(0,a.jsx)(n.code,{children:"update"})," event using the ",(0,a.jsx)(n.code,{children:"useAppEvent"})," and rotates the capsule."]}),"\n",(0,a.jsx)(r.G,{label:"Rotating a capsule using useAppEvent",filename:"app-events.jsx",code:w,showDemo:!0,children:(0,a.jsx)(o.l,{children:(0,a.jsx)(r.C,{children:(0,a.jsx)(g,{})})})}),"\n",(0,a.jsxs)(n.p,{children:["There are various application events that you can hook into, each with a specific callback signature. It's worth checking the ",(0,a.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Application.html",children:"Engine Application API"})," to see what events are available."]}),"\n",(0,a.jsxs)(n.p,{children:["You can also fire your own events using the ",(0,a.jsx)(n.code,{children:"app.fire"})," method."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { useAppEvent } from '@playcanvas/react/hooks'\n\nconst MyComponent = () => {\n  useAppEvent('myEvent', (message) => {\n    console.log('My event fired.', message);\n  });\n}\n\napp.fire('myEvent', 'Hello, world!');\n"})}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,a.jsxs)(n.p,{children:["Now that you've learned about interactivity, you can learn about ",(0,a.jsx)(n.a,{href:"../physics",children:"Physics"})," and ",(0,a.jsx)(n.a,{href:"../materials",children:"Materials"}),"."]})]})}function A(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(k,{...e})}):k(e)}},24421:(e,n,t)=>{t.d(n,{A:()=>p});var s=t(18676),a=t(19748),i=t(83395),r=t(93953),o=t(27351),c=t(8939),l=t(96540),d=t(74848);const p=e=>{const{width:n=2,depth:t=2,intensity:p=.75}=e,h=(0,l.useMemo)(()=>new r.e(n,1,t),[n,t]);return(0,d.jsxs)(s.w,{position:[0,.001,0],children:[(0,d.jsx)(a.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:o.au1,shadowUpdateMode:o.M5l,vsmBlurSize:8,shadowIntensity:p,intensity:0}),(0,d.jsx)(i.e,{script:c.X,intensity:p,scale:h})]})}},49801:(e,n,t)=>{t.d(n,{A:()=>o});var s=t(18676),a=t(83395),i=t(78692),r=t(74848);const o=({...e})=>(0,r.jsx)(s.w,{scale:[1e3,1,1e3],children:(0,r.jsx)(a.e,{script:i.x,...e})})},53558:(e,n,t)=>{t.d(n,{A:()=>j});var s=t(96540),a=t(68869),i=t(8939),r=t(78692),o=t(14007),c=t(25303),l=t(34363),d=t(53512),p=t(49801),h=t(24421),u=t(85593),m=t(83395),v=t(83171),x=t(74848);const y=e=>(0,x.jsx)(m.e,{script:v.d,...e}),j={React:s,...s,...o,...c,...l,...d,Grid:p.A,ShadowCatcher:h.A,GridScript:r.x,ShadowCatcherScript:i.X,StaticPostEffects:u.A,AutoRotate:y,CameraControls:a.a}},85593:(e,n,t)=>{t.d(n,{A:()=>r});var s=t(83395),a=t(15817),i=t(74848);const r=e=>{const n={lighting:{exposure:1.21,skyBoxIntensity:1.02},rendering:{renderFormat:18,renderTargetScale:1,sharpness:0,samples:4,toneMapping:4,fog:"none",fogColor:{r:0,g:0,b:0,a:1},fogRange:[0,100],fogDensity:.01,renderFormatFallback0:12,renderFormatFallback1:14,sceneColorMap:!1,sceneDepthMap:!1,fogStart:0,fogEnd:100},bloom:{enabled:!0,intensity:.1,lastMipLevel:1},grading:{enabled:!0,brightness:.83,contrast:1.1,saturation:1.2,tint:{r:1,g:.9333333333333333,b:.8666666666666667,a:1}},vignette:{enabled:!0,intensity:1,inner:.25,outer:1.52,curvature:.78},fringing:{enabled:!0,intensity:10},...e};return(0,i.jsx)(s.e,{script:a.P,...n})}}}]);