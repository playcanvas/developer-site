"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[18401,99623],{7184:(e,n,t)=>{t.d(n,{C:()=>w,G:()=>g});var a=t(11470),s=t(19365),r=t(18116),i=t(96540),o=t(95293),c=t(18676),l=t(58817),d=t(19748),u=t(83395),p=t(43025),h=t(7306),m=t(68869),v=t(78692),y=t(8939),f=t(93953),x=t(27351),j=t(74848);const g=({code:e,label:n,filename:t,language:o="jsx",children:c,showDemo:l=!1,showViewSourceButton:d=!0})=>{const[u,p]=(0,i.useState)(0);if(!c||!e)return console.error("CodeExample: code and children are required"),null;return(0,j.jsxs)(a.A,{defaultValue:u>0?"Code":l?"Demo":"Code",children:[(0,j.jsx)(s.A,{value:"Demo",children:(0,j.jsxs)("div",{className:"code-example-demo",children:[c,d&&(0,j.jsxs)("div",{className:"code-example-demo-footer",children:[n," - ",(0,j.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),p(e=>e+1)},children:"View Code"})]})]})}),(0,j.jsx)(s.A,{value:"Code",children:(0,j.jsx)(r.A,{language:o,title:t,children:e})})]},u)},b=e=>{const{width:n=2,depth:t=2,intensity:a=.75}=e,s=(0,i.useMemo)(()=>new f.e(n,1,t),[n,t]);return(0,j.jsxs)(c.w,{position:[0,.001,0],children:[(0,j.jsx)(d.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:x.au1,shadowUpdateMode:x.M5l,vsmBlurSize:8,shadowIntensity:a,intensity:0}),(0,j.jsx)(u.e,{script:y.X,intensity:a,scale:s})]})},w=({children:e,useLight:n=!0,useControls:t=!1,useGrid:a=!1,camera:s=[0,0,10]})=>{const{colorMode:r}=(0,o.G)(),{asset:i}=(0,h.yj)("/assets/environment.png"),y="dark"===r?"#2a2a2a":"#e4e0e0";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(c.w,{name:"camera",position:s,children:[(0,j.jsx)(l.i,{clearColor:y}),t&&(0,j.jsx)(u.e,{script:m.a})]}),n&&(0,j.jsx)(p.O,{envAtlas:i,showSkybox:!1}),a&&(0,j.jsxs)(c.w,{name:"grid",scale:[1e3,1,1e3],children:[(0,j.jsx)(u.e,{script:v.x}),(0,j.jsx)(d.v,{type:"directional",castShadows:!0,intensity:.75}),(0,j.jsx)(b,{})]}),e]})}},11470:(e,n,t)=>{t.d(n,{A:()=>w});var a=t(96540),s=t(34164),r=t(23104),i=t(56347),o=t(205),c=t(57485),l=t(31682),d=t(70679);function u(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a}))}(t);return function(e){const n=(0,l.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const t=(0,i.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,a.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,r=p(e),[i,c]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r})),[l,u]=m({queryString:t,groupId:s}),[v,y]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,a.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),f=(()=>{const e=l??v;return h({value:e,tabValues:r})?e:null})();(0,o.A)(()=>{f&&c(f)},[f]);return{selectedValue:i,selectValue:(0,a.useCallback)(e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),y(e)},[u,y,r]),tabValues:r}}var y=t(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(74848);function j({className:e,block:n,selectedValue:t,selectValue:a,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),l=e=>{const n=e.currentTarget,s=o.indexOf(n),r=i[s].value;r!==t&&(c(n),a(r))},d=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:a})=>(0,x.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:l,...a,className:(0,s.A)("tabs__item",f.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===t);return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function b(e){const n=v(e);return(0,x.jsxs)("div",{className:(0,s.A)("tabs-container",f.tabList),children:[(0,x.jsx)(j,{...n,...e}),(0,x.jsx)(g,{...n,...e})]})}function w(e){const n=(0,y.A)();return(0,x.jsx)(b,{...e,children:u(e.children)},String(n))}},18280:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>E,contentTitle:()=>S,default:()=>C,frontMatter:()=>w,metadata:()=>a,toc:()=>A});const a=JSON.parse('{"id":"user-manual/playcanvas-react/guide/interactivity","title":"Interactivity","description":"Once you have a scene, you\'ll want to make it interactive. You can do this in a number of ways depending on your use case.","source":"@site/docs/user-manual/playcanvas-react/guide/interactivity.mdx","sourceDirName":"user-manual/playcanvas-react/guide","slug":"/user-manual/playcanvas-react/guide/interactivity","permalink":"/ja/user-manual/playcanvas-react/guide/interactivity","draft":false,"unlisted":false,"editUrl":"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/playcanvas-react/guide/interactivity.mdx","tags":[],"version":"current","frontMatter":{"title":"Interactivity"},"sidebar":"userManualSidebar","previous":{"title":"Concepts","permalink":"/ja/user-manual/playcanvas-react/guide/"},"next":{"title":"Loading Assets","permalink":"/ja/user-manual/playcanvas-react/guide/loading-assets"}}');var s=t(74848),r=t(28453),i=t(7184),o=t(78264),c=t(96540),l=t(18676),d=t(16230),u=t(30885);const p=()=>{const e=["lavender","lightsteelblue","powderblue","rebeccapurple"],[n,t]=(0,c.useState)("lightsteelblue"),a=(0,u.R)({diffuse:n});return(0,s.jsx)(l.w,{name:"sphere",onClick:()=>{t(e[Math.floor(Math.random()*e.length)])},onPointerOver:()=>document.body.style.cursor="pointer",onPointerOut:()=>document.body.style.cursor="default",children:(0,s.jsx)(d.d,{type:"sphere",material:a})})},h="import { useState } from 'react'\nimport { Entity } from '@playcanvas/react'\nimport { Render } from '@playcanvas/react/components'\nimport { useMaterial } from '@playcanvas/react/hooks'\n\nexport const Interactivity = () => {\n  const colors = [\n    'lavender', 'lightsteelblue', 'powderblue', 'rebeccapurple'\n  ]\n\n  // Create the initial diffuse color and create the material\n  const [diffuse, setDiffuse] = useState('lightsteelblue')\n  const material = useMaterial({ diffuse })\n\n  const onRequestRandomColor = () => {\n    setDiffuse(colors[Math.floor(Math.random() * colors.length)])\n  }\n\n  // Attach hover and leave handlers to the sphere\n  const onHover = () => document.body.style.cursor = 'pointer'\n  const onLeave = () => document.body.style.cursor = 'default'\n\n  return (\n    // Attach an onClick handler to the sphere to request a color change\n    <Entity\n      name=\"sphere\"\n      onClick={onRequestRandomColor}\n      onPointerOver={onHover}\n      onPointerOut={onLeave} >\n        <Render type=\"sphere\" material={material} />\n    </Entity>\n  )\n}\n";var m=t(83395),v=t(85169);class y extends v.e{static scriptName="spinningCube";speed=10;update(e){this.entity.rotate(0,e*this.speed,e*this.speed*2)}}const f=()=>(0,s.jsxs)(l.w,{children:[(0,s.jsx)(d.d,{type:"box"}),(0,s.jsx)(m.e,{script:y,speed:10})]}),x="import { Entity } from '@playcanvas/react'\nimport { Render } from '@playcanvas/react/components'\nimport { Script } from '@playcanvas/react/components'\nimport { Script as PcScript } from 'playcanvas'\n\n/**\n * A simple script that rotates the entity it's attached to.\n */\nclass SpinningCube extends PcScript {\n    static scriptName = 'spinningCube'\n    speed = 10\n    update(dt) {\n        this.entity.rotate(0, dt * this.speed, dt * this.speed * 2)\n    }\n}\n\nexport const Scripting = () => (\n    <Entity>\n        <Render type=\"box\" />\n        <Script script={SpinningCube} speed={10} />\n    </Entity>\n)\n";var j=t(50224);const g=()=>{const e=(0,c.useRef)(null);(0,j.f)("update",n=>{e.current?.rotate(0,10*n,10*n*2)});return(0,s.jsx)(l.w,{ref:e,children:(0,s.jsx)(d.d,{type:"capsule"})})},b="import { useAppEvent } from '@playcanvas/react/hooks'\nimport { Entity } from '@playcanvas/react'\nimport { Render } from '@playcanvas/react/components'\nimport { useRef } from 'react'\n\nexport const AppEvents = () => {\n  const speed = 10;\n  const boxRef = useRef(null);\n\n  useAppEvent('update', (dt) => {\n    boxRef.current?.rotate(0, dt * speed, dt * speed * 2);\n  });\n\n  const onEntityClick = () => {\n    console.log('Entity clicked');\n  }\n\n  return (\n    <Entity ref={boxRef}>\n      <Render type='capsule' />\n    </Entity>\n  )\n}\n",w={title:"Interactivity"},S=void 0,E={},A=[{value:"Pointer Events",id:"pointer-events",level:3},{value:"The <code>Script</code> component",id:"the-script-component",level:3},{value:"Application events",id:"application-events",level:3},{value:"Next steps",id:"next-steps",level:2}];function k(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Once you have a scene, you'll want to make it interactive. You can do this in a number of ways depending on your use case."}),"\n",(0,s.jsx)(n.h3,{id:"pointer-events",children:"Pointer Events"}),"\n",(0,s.jsxs)(n.p,{children:["You can attach pointer events to an ",(0,s.jsx)(n.code,{children:"Entity"})," to respond to user interaction. It's a simple way to handle user input in a reactive way."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Pointer events bubble up. You can attach events to a parent ",(0,s.jsx)(n.code,{children:"Entity"})," and events will propagate up through the React tree."]})}),"\n",(0,s.jsx)(n.p,{children:"Let's make a sphere that changes color when you click it."}),"\n",(0,s.jsx)(i.G,{label:"Using pointer events",filename:"interactivity.jsx",code:h,showDemo:!0,children:(0,s.jsx)(o.l,{children:(0,s.jsx)(i.C,{children:(0,s.jsx)(p,{})})})}),"\n",(0,s.jsx)(n.p,{children:"Entities support the following pointer events which closely match the behavior of the DOM Pointer Events API."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onPointerUp"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onPointerDown"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onPointerOver"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onPointerOut"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"onClick"})}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"the-script-component",children:["The ",(0,s.jsx)(n.code,{children:"Script"})," component"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Script"})," component is a handy way to add custom behavior to an ",(0,s.jsx)(n.code,{children:"Entity"}),". It's a convenient way to attach any ESM PlayCanvas ",(0,s.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Script.html",children:"Script"})," to an ",(0,s.jsx)(n.code,{children:"Entity"}),". This is useful for interactivity or animations or anything that needs to happen outside the React render loop."]}),"\n",(0,s.jsxs)(n.p,{children:["You assign an ESM PlayCanvas ",(0,s.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Script.html",children:"Script"})," to the ",(0,s.jsx)(n.code,{children:"script"})," prop of a ",(0,s.jsx)(n.code,{children:"<Script>"})," component."]}),"\n",(0,s.jsx)(i.G,{label:"Rotating a cube with a Script",filename:"scripting.jsx",code:x,showDemo:!0,children:(0,s.jsx)(o.l,{children:(0,s.jsx)(i.C,{children:(0,s.jsx)(f,{})})})}),"\n",(0,s.jsxs)(n.p,{children:["PlayCanvas Scripts are ESM modules that extend the ",(0,s.jsx)(n.code,{children:"Script"})," class. You can use any existing Script or create your own, or any from the engine repository for ",(0,s.jsx)(n.a,{href:"https://github.com/playcanvas/engine/tree/main/scripts/esm",children:"existing Scripts"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["If you need to animate something every frame, using a ",(0,s.jsx)(n.code,{children:"<Script>"})," component is generally more performant than re-rendering the React tree, however a Script can override Entity props."]})}),"\n",(0,s.jsxs)(n.p,{children:["You can read more about ",(0,s.jsx)(n.a,{href:"/user-manual/scripting/",children:"Scripts in the docs"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"application-events",children:"Application events"}),"\n",(0,s.jsxs)(n.p,{children:["A more React-like way to handle interactivity is to use the ",(0,s.jsx)(n.code,{children:"useAppEvent"})," hook. This hook allows you to subscribe to PlayCanvas application events with proper TypeScript support. It supports both built-in events and custom events with their specific callback signatures."]}),"\n",(0,s.jsxs)(n.p,{children:["The following example hooks into the ",(0,s.jsx)(n.code,{children:"update"})," event using the ",(0,s.jsx)(n.code,{children:"useAppEvent"})," and rotates the capsule."]}),"\n",(0,s.jsx)(i.G,{label:"Rotating a capsule using useAppEvent",filename:"app-events.jsx",code:b,showDemo:!0,children:(0,s.jsx)(o.l,{children:(0,s.jsx)(i.C,{children:(0,s.jsx)(g,{})})})}),"\n",(0,s.jsxs)(n.p,{children:["There are various application events that you can hook into, each with a specific callback signature. It's worth checking the ",(0,s.jsx)(n.a,{href:"https://api.playcanvas.com/engine/classes/Application.html",children:"Engine Application API"})," to see what events are available."]}),"\n",(0,s.jsxs)(n.p,{children:["You can also fire your own events using the ",(0,s.jsx)(n.code,{children:"app.fire"})," method."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { useAppEvent } from '@playcanvas/react/hooks'\n\nconst MyComponent = () => {\n  useAppEvent('myEvent', (message) => {\n    console.log('My event fired.', message);\n  });\n}\n\napp.fire('myEvent', 'Hello, world!');\n"})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsxs)(n.p,{children:["Now that you've learned about interactivity, you can learn about ",(0,s.jsx)(n.a,{href:"../physics",children:"Physics"})," and ",(0,s.jsx)(n.a,{href:"../materials",children:"Materials"}),"."]})]})}function C(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(k,{...e})}):k(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var a=t(34164);const s={tabItem:"tabItem_Ymn6"};var r=t(74848);function i({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,t),hidden:n,children:e})}},24421:(e,n,t)=>{t.d(n,{A:()=>u});var a=t(18676),s=t(19748),r=t(83395),i=t(93953),o=t(27351),c=t(8939),l=t(96540),d=t(74848);const u=e=>{const{width:n=2,depth:t=2,intensity:u=.75}=e,p=(0,l.useMemo)(()=>new i.e(n,1,t),[n,t]);return(0,d.jsxs)(a.w,{position:[0,.001,0],children:[(0,d.jsx)(s.v,{type:"directional",castShadows:!0,normalOffsetBias:0,shadowBias:0,shadowDistance:16,shadowResolution:1024,shadowType:o.au1,shadowUpdateMode:o.M5l,vsmBlurSize:8,shadowIntensity:u,intensity:0}),(0,d.jsx)(r.e,{script:c.X,intensity:u,scale:p})]})}},49801:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(18676),s=t(83395),r=t(78692),i=t(74848);const o=({...e})=>(0,i.jsx)(a.w,{scale:[1e3,1,1e3],children:(0,i.jsx)(s.e,{script:r.x,...e})})},53558:(e,n,t)=>{t.d(n,{A:()=>x});var a=t(96540),s=t(68869),r=t(8939),i=t(78692),o=t(14007),c=t(25439),l=t(34363),d=t(53512),u=t(49801),p=t(24421),h=t(85593),m=t(83395),v=t(83171),y=t(74848);const f=e=>(0,y.jsx)(m.e,{script:v.d,...e}),x={React:a,...a,...o,...c,...l,...d,Grid:u.A,ShadowCatcher:p.A,GridScript:i.x,ShadowCatcherScript:r.X,StaticPostEffects:h.A,AutoRotate:f,CameraControls:s.a}},85593:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(83395),s=t(15817),r=t(74848);const i=e=>{const n={lighting:{exposure:1.21,skyBoxIntensity:1.02},rendering:{renderFormat:18,renderTargetScale:1,sharpness:0,samples:4,toneMapping:4,fog:"none",fogColor:{r:0,g:0,b:0,a:1},fogRange:[0,100],fogDensity:.01,renderFormatFallback0:12,renderFormatFallback1:14,sceneColorMap:!1,sceneDepthMap:!1,fogStart:0,fogEnd:100},bloom:{enabled:!0,intensity:.1,lastMipLevel:1},grading:{enabled:!0,brightness:.83,contrast:1.1,saturation:1.2,tint:{r:1,g:.9333333333333333,b:.8666666666666667,a:1}},vignette:{enabled:!0,intensity:1,inner:.25,outer:1.52,curvature:.78},fringing:{enabled:!0,intensity:10},...e};return(0,r.jsx)(a.e,{script:s.P,...n})}}}]);